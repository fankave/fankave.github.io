angular.module("PostModule",["NetworkModule","SplashModule","MediaModule","angularFileUpload"]).controller("PostController",["$scope","$sce","$timeout","$window","$location","$sanitize","$routeParams","networkService","ReplyService","TopicService","CommentService","UserInfoService","URIHelper","SplashService","MUService","FileUploader","ForumStorage","UserAgentService",function(e,t,o,n,r,a,s,l,d,c,u,m,p,g,f,h,v,R){function b(){e.leftTeam=c.getTeamA(),e.rightTeam=c.getTeamB();var t=c.getScore();void 0!=t&&(e.leftTeamScore=t.points[0],e.rightTeamScore=t.points[1]),e.gameStatus=c.getGameStatus(),e.topicTitle=c.getTitle(),"live"==e.gameStatus&&(e.gamePeriod=c.getGamePeriod(),e.gameClock=c.getGameClock())}function y(t){if(GEN_DEBUG&&console.log("Already Had PostID: ",e.postID),e.postID||(e.postID=d.getPostId(),GEN_DEBUG&&console.log("Regenerated PostID: ",e.postID)),void 0==t&&(t=u.getCommentById(e.postID)),void 0!=t){NETWORK_DEBUG&&console.log("Updated comment in reply triggered");var i={};i=t,i.postAuthorName=t.author.name,i.postAuthorPhoto=t.author.photo,i.postTimestamp=t.createdAt,i.likeCount=t.metrics.likes,i.replyCount=t.metrics.replies,i.mediaAspectFeed=t.mediaAspectFeed,i.isLiked=t.signal.like,i.topicId=t.topicId,i.isMyComment=m.isCurrentUser(t.author.id),"media"===i.type&&(i.mediaUrl=t.mediaUrl,i.mediaAspectFeed=t.mediaAspectFeed,i.mediaAspectFull=t.mediaAspectFull,i.mediaAspectRatio=t.mediaAspectRatio,i.mediaOrientation=t.mediaOrientation,i.mediaThumbUrl=t.mediaThumbUrl),"embed"===i.type&&(i.shared=!0,i.embed=t.embed,i.embed.embedCreatedAt=t.embedCreatedAt,i.embed.embedCreatedAtFull=t.embedCreatedAtFull,"media"===i.embedType&&(i.mediaUrl=t.embedMedia.mediaUrl,i.mediaThumbUrl=t.embedMedia.mediaThumbUrl,i.mediaAspectFeed=t.embedMedia.mediaAspectFeed,i.mediaAspectFull=t.embedMedia.mediaAspectFull,i.mediaAspectRatio=t.embedMedia.mediaAspectRatio,i.mediaOrientation=t.embedMedia.mediaOrientation),"Twitter"===i.providerName?i.embed.embedLogo="img/twitterLogo@2x.png":i.embed.embedLogo=t.embed.provider.logo,"link"===t.embed.type&&t.embed.playable===!0&&(i.embedHtml=t.embedHtml)),e.comment=i}}function E(){var o=d.replies(),n=o.length;for(e.replies=[],i=0;i<n;i++){var r={};r=o[i],r.postAuthorName=o[i].author.name,r.postAuthorPhoto=o[i].author.photo,r.isMyReply=m.isCurrentUser(o[i].author.id),r.postTimestamp=o[i].createdAt,r.likeCount=o[i].metrics.likes,r.replyCount=o[i].metrics.replies,r.mediaAspectFeed=o[i].mediaAspectFeed,r.isLiked=o[i].signal.like,"media"===r.type&&(r.mediaUrl=o[i].mediaUrl,r.mediaAspectFeed=o[i].mediaAspectFeed,r.mediaAspectFull=o[i].mediaAspectFull,r.mediaAspectRatio=o[i].mediaAspectRatio,r.mediaOrientation=o[i].mediaOrientation,r.mediaThumbUrl=o[i].mediaThumbUrl),"embed"===r.type&&(r.shared=!0,r.embed=o[i].embed,r.embed.embedCreatedAt=o[i].embedCreatedAt,r.embed.embedCreatedAtFull=o[i].embedCreatedAtFull,"Twitter"===r.providerName?r.embed.embedLogo="img/twitterLogo@2x.png":r.embed.embedLogo=o[i].embed.provider.logo,"link"===o[i].embed.type&&o[i].embed.playable===!0&&(r.embed.embedHtml=t.trustAsHtml(o[i].embedHtml))),e.replies.push(r),"media"==e.replies[i].type}1==e.justReplied&&setTimeout(function(){window.scrollTo(0,document.body.scrollHeight),e.justReplied=!1},1e3)}R.isMobileUser()?(e.mobileBrowser=!0,e.mobileUserAgent=R.getMobileUserAgent()):e.mobileBrowser=!1,c.toggleFromPost(),v.getFromLocalStorage("hasUserVisited")===!0&&e.initPage();e.pageClass="page-post",e.postID=s.postID,e.topicId=c.getTopicId(),e.justReplied=!1,d.setPostId(s.postID),e.backToTopicButtonTapped=function(){var t=c.getTopicId();if(-1!==window.location.href.indexOf("?"))var i=window.location.href.slice(window.location.href.indexOf("?"));void 0==t&&(t=e.comment.topicId),void 0!==i?r.url("/topic/"+t+i):r.url("/topic/"+t)},e.setPeelUI=function(e,t){"peel"===e&&t?($("#postSection").css("padding-top","104px"),$("#backToChatContainer").css("margin-top","54px")):"email"===e?$("#postSection").css("padding-top","104px"):"MI16"===e||$("#postSection").css("padding-top","50px")},m.isPeelUser()?(e.isPeelUser=!0,p.getPeelShowId()?e.peelShowId=!0:e.peelShowId=!1,g.hidePeelSplash=!0,e.setPeelUI("peel",e.peelShowId)):m.isSmartStadiumUser()?(e.isSmartStadiumUser=!0,e.setPeelUI("email")):m.isMI16User()||m.isMWCUser()?(e.techMUser=!0,e.setPeelUI()):(e.techMUser=!1,e.setPeelUI()),e.requestReplies=function(){l.send(d.getRepliesRequest(e.postID));var t=u.getCommentById(e.postID);void 0!=t?y(t):(NETWORK_DEBUG&&console.log("No data from comment service"),l.send(u.getCommentByIdRequest(e.postID)))},e.peelClose=function(){console.log("peelClose()")},e.peelWatchOnTV=function(){GOOGLE_ANALYTICS===!0&&ga("send","event","Peel","click","PeelWatchOnTV"),GEN_DEBUG&&console.log("peelWatchOnTV()");var e=p.getPeelShowId();void 0!=e?window.location="peel://tunein/"+e:window.location="peel://home"},e.showNewRepliesIndicator=!1,e.newRepliesIndicatorTapped=function(){GEN_DEBUG&&console.log("newRepliesIndicatorTapped"),e.showNewRepliesIndicator=!1,E(),window.scrollTo(0,document.body.scrollHeight)},e.checkDirectReply=function(){c.directComment&&($("#postCommentField").focus(),c.directComment=!1)},e.triggerRepliesKeyboard=function(){$("#postCommentField").focus()},e.secureLink=function(e,t){return m.isGuestUser()?"":e+t},e.initReplyPage=function(){e.pageClass="page-post",e.paddingTop="20",e.requestReplies();$("#replyPost").height();e.mobileBrowser===!0&&(document.getElementById("postSection").style.paddingBottom="42px"),e.$watch("replies",function(e,t){o(function(){var t=document.getElementsByClassName("postRow");for(div in t)if(void 0!=e){var i=e[div];if(void 0!=i){var o=t[div];o.onclick=function(e){return $(e.target).is("a")?void v.setToLocalStorage("replyBookmark",this.id):void 0}}}$(".commentsContainer").each(function(){$(".image-link").magnificPopup({type:"image"})})})})},m.isUserLoggedIn()?(l.isSocketConnected()||l.init(),e.initReplyPage()):r.url("/login"),e.updateLikeComment=function(e){u.isCommentLiked(e)?l.send(u.getUnlikeCommentRequest(e)):l.send(u.getLikeCommentRequest(e))},e.updateLikeReply=function(e){d.isReplyLiked(e)?l.send(d.unlikeReplyRequest(e)):l.send(d.likeReplyRequest(e))},e.deleteReply=function(e){GEN_DEBUG&&console.log("deleteReply("+e+")"),l.send(d.deleteReplyRequest(e))},e.reportReplyAsSpam=function(e){GEN_DEBUG&&console.log("reportReplyAsSpam("+e+")"),l.send(d.flagReplyRequest(e))},e.deleteComment=function(t){GEN_DEBUG&&console.log("deleteComment("+t+")"),l.send(u.deleteCommentRequest(t)),r.url("/topic/"+e.topicId),n.location.reload()},e.reportCommentAsSpam=function(e){GEN_DEBUG&&console.log("reportCommentAsSpam("+e+")"),l.send(u.flagCommentRequest(e))},e.imageClick=function(e){event.cancelBubble=!0,event.stopPropagation&&event.stopPropagation(),$.magnificPopup.open({items:{type:"image",src:e},type:"inline",callbacks:{open:function(){$("body").bind("touchmove",function(e){e.preventDefault()})},close:function(){$("body").unbind("touchmove")}}})};var U=function(){if(void 0==e.replies)E();else{var t=d.replies(),i=t.length;e.replies.length<i?m.isCurrentUser(t[i-1].author.id)?E():e.showNewRepliesIndicator=!0:E()}};d.registerObserverCallback(U),c.registerObserverCallback(b),u.registerObserverCallback(y,!0),e.trustSrc=function(e){return t.trustAsResourceUrl(e)},n.addEventListener("beforeunload",function(){v.setToLocalStorage("hasUserVisited",!0)}),e.xLinkActivated=!1}]),angular.module("SmartStadiumModule",[]).controller("SmartStadiumController",["$scope",function(e){var t=this;this.viewScreen=!1,this.ssActiveScreen,this.viewHighlights=function(){t.ssActiveScreen="highlights",t.viewScreen=!0},this.viewRoster=function(){t.ssActiveScreen="roster",t.viewScreen=!0},this.viewStats=function(){t.ssActiveScreen="stats",t.viewScreen=!0},this.viewProfileStats=function(){t.ssActiveScreen="profileStats",t.viewScreen=!0},this.exitView=function(){t.viewScreen=!1}}]),angular.module("TopicModule").directive("mediaPlayer",["$sce","UserAgentService","AnalyticsService","DimensionService",function(e,t,i,o){return{restrict:"E",scope:{thisPost:"=",vidIndex:"@"},link:function(n,r,a){function s(t){return e.trustAsResourceUrl(t)}function l(e,t,i){var o=r[0].firstElementChild.childNodes,a=o[1],s=$(a).width();GEN_DEBUG,n.isMobileUser&&1===e&&s>380?s=381:1===e&&s>300&&(s=300),1.778===e&&s>533&&(s=533),2===e&&s>600&&(s=600);var l={},u=s/e;return(1.778===e||2===e)&&u>300&&(u=300),l.height=u,i&&(l["background-image"]="url("+i.mediaThumbUrl+")",l["background-size"]="cover",l["background-position-y"]=d(i),l["background-position-x"]=c(i)),GEN_DEBUG,l}function d(e){var t;return e.mediaAspectFeed.y?t="-"+e.mediaAspectFeed.y+"px":e.mediaAspectFull.y&&(t="-"+e.mediaAspectFull.y+"px"),t}function c(e){var t;return e.mediaAspectFeed.x?t="-"+e.mediaAspectFeed.x+"px":e.mediaAspectFull.x&&(t="-"+e.mediaAspectFull.x+"px"),t}n.isMobileUser=t.isMobileUser();var u="iOS"===t.getMobileUserAgent(),m=n.thisPost;n.videoSource=s(m.mediaUrl),n.aspectRatio=o.setAspectRatio(m.mediaAspectRatio,m.mediaOrientation,"video"),n.dimensions=l(m.mediaAspectRatio,m.mediaOrientation),n.posterDimensions=l(m.mediaAspectRatio,m.mediaOrientation,m);var p=r[0].firstElementChild.childNodes[1],g=r[0].firstElementChild.childNodes[7];$(p).on("waiting",function(){GEN_DEBUG&&console.log("Video Waiting"),n.isMobileUser&&!u?(g.className="media-loading-fullscreen",g.style.zIndex="2147483647"):g.className="media-loading"}),$(p).on("stalled",function(){GEN_DEBUG&&console.log("Video Stalled"),n.isMobileUser&&!u?(g.className="media-loading-fullscreen",g.style.zIndex="2147483647"):g.className="media-loading"});var f;$(p).on("canplay",function(){f=!0}),$(p).on("playing",function(){GEN_DEBUG&&console.log("Video Playing"),g.className="media-loading-default"}),$(p).on("play",function(){GEN_DEBUG&&console.log("Video play clicked"+n.thisPost.id),GOOGLE_ANALYTICS===!0&&ga("send","event","Video","Play",n.thisPost.id),ANALYTICS&&i.addSession("explore_video")}),$(p).on("pause",function(){var e=Math.round(p.currentTime);GEN_DEBUG&&console.log("Video paused"+n.thisPost.id+": TimePlayed "+e),GOOGLE_ANALYTICS===!0&&ga("send","event","Video","VideoLengthPlayed",n.thisPost.id,e),ANALYTICS&&i.exploreSessionEvent("Video",n.thisPost.id,n.thisPost.type,n.thisPost.tweetId,n.thisPost.providerName,"tab",e),ANALYTICS_DEBUG&&(console.log(n.thisPost),console.log("Video   "+n.thisPost.id+"   "+n.thisPost.type+"   "+n.thisPost.tweetId+"   "+n.thisPost.providerName+"   tab"))}),$(p).on("ended",function(){Math.round(p.currentTime)}),n.togglePlayPause=function(e){var t=r[0].firstElementChild.childNodes,i=t[1],o=t[3],a=t[5],s=t[7];i.paused||i.ended?(a.className="pause",o.className="pause",i.play(),n.isMobileUser&&(i.requestFullscreen?i.requestFullscreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.msRequestFullscreen&&i.msRequestFullscreen())):(s.className="media-loading-default",a.className="media-controls",o.className="media-thumbnail",i.pause())}},templateUrl:"partials/mediaPlayer.html"}}]),angular.module("TopicModule").directive("embedPlayer",["$sce","UserAgentService","DimensionService",function(e,t,i){return{restrict:"E",scope:{thisPost:"="},link:function(o,n,r){function a(t){return e.trustAsHtml(t)}function s(e,t){var i=n[0].childNodes,o=i[0],r=$(o).width();GEN_DEBUG&&(console.log("PlayerNodes in setD: ",i),console.log("Video in setD: ",o,o.childNodes),console.log("Width in setD: ",r)),l&&1===e&&r>380?r=381:1===e&&r>300&&(r=300),1.778===e&&r>533&&(r=533),2===e&&r>600&&(r=600);var a=r/e;(1.778===e||2===e)&&a>300&&(a=300);var s;setTimeout(function(){s=o.childNodes[0],$(s).css("height",a),GEN_DEBUG&&console.log("Setting Height On: ",s,a),twttr.widgets.load()},0)}var l=t.isMobileUser(),d=o.thisPost;o.embedHtml=a(d.embedHtml),o.aspectRatio=i.setAspectRatio(d.mediaAspectRatio,d.mediaOrientation,"video"),o.dimensions=s(d.mediaAspectRatio,d.mediaOrientation)},templateUrl:"partials/embedPlayer.html"}}]),angular.module("TopicModule").directive("imageControl",["$sce","URIHelper","DimensionService",function(e,t,i){return{restrict:"E",scope:{thisPost:"="},link:function(e,o,n){function r(t,i,n){var r=o[0].childNodes[0],s=$(r).width();GEN_DEBUG&&(console.log("Image in setD: ",r),console.log("Width in setD: ",s)),e.isMobileUser&&1===t&&s>380?s=381:1===t&&s>300&&(s=300),1.778===t&&s>533&&(s=533),2===t&&s>600&&(s=600);var l={},d=s/t;return(1.778===t||2===t)&&d>300&&(d=300),l.height=d,n&&(l["background-image"]="url("+n.mediaUrl+")",l["background-size"]="cover",l["background-position-y"]=a(n,"y",d)||"",l["background-position-x"]=a(n,"x",s)||""),GEN_DEBUG&&console.log("Set Dimensions Object: ",l),l}function a(e,t,i){var o,n;if("y"===t&&e.mediaAspectFeed.y){n=i/e.mediaAspectFeed.h;var r=e.mediaAspectFeed.y*n;o="-"+r+"px"}if("x"===t&&e.mediaAspectFeed.x){n=i/e.mediaAspectFeed.w;var a=e.mediaAspectFeed.x*n;o="-"+a+"px"}return o}var s=o[0],l=e.thisPost;e.aspectRatio=i.setAspectRatio(l.mediaAspectRatio,l.mediaOrientation,"image"),e.dimensions=r(l.mediaAspectRatio,l.mediaOrientation,l),e.imageClick=function(e){$.magnificPopup.open({items:{type:"image",src:e},type:"inline",callbacks:{open:function(){$("body").bind("touchmove",function(e){e.preventDefault()}),t.embedded()&&(console.log("MFP: ",$(".mfp-content").offset()," DOC: ",s.getBoundingClientRect().top),$(".mfp-content").offset()!==s.getBoundingClientRect().top&&(console.log("Shifting MFP"),$(".mfp-content").offset({top:s.getBoundingClientRect().top-100})))},close:function(){$("body").unbind("touchmove")}}})}},templateUrl:"partials/imageControl.html"}}]),angular.module("SocialModule").directive("shareToChatDialog",["URIHelper",function(e){return{restrict:"E",scope:{thisPost:"=",trustSource:"&",shareSubmit:"&",exitShare:"&",highlight:"&",unhighlight:"&"},link:function(t,i,o){e.embedded()&&(t.embed=!0)},templateUrl:"partials/sharePreview.html"}}]),angular.module("TopicModule").factory("DimensionService",function(){function e(e,t,i){GEN_DEBUG&&console.log("setAspectRatio: ",e,t,i);var o=[];return"portrait"===t?1.778===e?o.push(i+"-portrait-9x16"):o.push(i+"-portrait-1x2"):"square"===t?o.push(i+"-square"):1.778===e?o.push(i+"-landscape-16x9"):o.push(i+"-landscape-2x1"),o}function t(e,t,i,o,n){var r=e[0].firstElementChild.childNodes,a=r[1],s=$(a).width();GEN_DEBUG,scope.isMobileUser&&1===t&&s>380?s=381:1===t&&s>300&&(s=300),1.778===t&&s>533&&(s=533),2===t&&s>600&&(s=600);var l={},d=s/t;return(1.778===t||2===t)&&d>300&&(d=300),l.height=d,video&&(l["background-image"]="url("+video.mediaThumbUrl+")",l["background-size"]="cover",l["background-position-y"]=setYOffset(video),l["background-position-x"]=setXOffset(video)),GEN_DEBUG,l}return{setAspectRatio:e,setDimensions:t}}),angular.module("NetworkModule").factory("TimerService",["$routeParams","$window","$timeout","$interval","networkService","AnalyticsService","ChannelService","TopicService",function(e,t,i,o,n,r,a,s){function l(){R=d(),u(),b=o(v,1e3),T=!0,GEN_DEBUG&&console.log("TimeOnPage: 1 second"),GOOGLE_ANALYTICS===!0&&ga("send","event","TimeOnPage","0","1 second",{nonInteraction:1})}function d(){var e=["webkit","moz","ms","o"];if("hidden"in t.document)return"hidden";for(var i=0;i<e.length;i++)if(e[i]+"Hidden"in t.document)return e[i]+"Hidden";return null}function c(){return R?t.document[R]:!1}function u(){if(R){var e=R.replace(/[H|h]idden/,"")+"visibilitychange";t.document.addEventListener(e,function(){g(f,h)})}}function m(){NETWORK_DEBUG&&console.log("Disconnect & End Session"),r.leaveSessionEvent(a.getChannel()||s.getChannelId(),e.topicID,E),s.currentTimer(null,!0)&&i.cancel(s.currentTimer(!1,!0)),s.currentTimer()&&o.cancel(s.currentTimer(!1)),n.closeSocket(),y=void 0,D=!0}function p(){NETWORK_DEBUG&&console.log("Reconnect & Start New Session"),t.location.reload()}function g(e,t){c()?(GEN_DEBUG&&console.log("hidden callback fired"),t(),y=i(m,2e4)):(GEN_DEBUG&&console.log("visible callback fired"),e(),y&&i.cancel(y),D&&p())}function f(){GEN_DEBUG&&console.log("Starting Timer at: "+U+"seconds"),1800>=U&&(b=o(v,1e3))}function h(){GEN_DEBUG&&console.log("Stopping Timer at: "+U+"seconds"),o.cancel(b)}function v(){return U+=1,U>1800?void o.cancel(b):(10!==U&&30!==U&&60!==U||(GEN_DEBUG&&console.log("TimeOnPage: "+U+" seconds | Count: "+S),GOOGLE_ANALYTICS===!0&&ga("send","event","TimeOnPage",S.toString(),U+" seconds",{nonInteraction:1}),S++),void(U>60&&U%60===0&&(A++,(5>=A||10===A||20===A||30===A)&&(GEN_DEBUG&&console.log("TimeOnPage: "+A+" mins | Count: "+S),GOOGLE_ANALYTICS===!0&&ga("send","event","TimeOnPage",S.toString(),A+" mins",{nonInteraction:1}),S++))))}var R,b,y,E,U=0,S=1,A=1,T=!1,D=!1;return{initTimer:l,endSession:m,globalTime:function(){return U},globalTimerStarted:function(){return T},sessionReset:function(){return D},setLastActiveTab:function(e){E=e}}}]),angular.module("NetworkModule").factory("ReplyService",["DateUtilityService","Bant","FDSUtility",function(e,t,o){function n(e){if(_=[],tempReplyData=e.data.results,void 0!=tempReplyData&&tempReplyData.length>0){var o=tempReplyData.length;for(i=0;i<o;i++){var n={};n=t.bant(tempReplyData[i]),void 0!=n.id&&_.push(n),A=tempReplyData[i].topicId}F()}}function r(e){var i=e.data;if(void 0!=i&&(GEN_DEBUG&&(console.log("appendToReplies :"+i),console.log("Reply comment ID :"+i.commentId),console.log("Current comment ID :"+T)),i.commentId==T)){var o=t.bant(i);void 0!=o.id&&_.push(o),F()}}function a(e){var o=e.data;for(i=0;i<_.length;i++)if(_[i].id==o.id)return _[i]=t.bant(o),GEN_DEBUG&&console.log("Reply updated"),1;return r(e),0}function s(e){for(i=0;i<_.length;i++)if(_[i].id==e.id)return _[i]=e,void(NETWORK_DEBUG&&console.log("updated Data for id:"+_[i].id))}function l(e,i){if(NETWORK_DEBUG&&console.log("updateLikeReplyWithId :"+e+"   liked "+i),void 0!=e){var o;o=c(e),o=t.updateBantLiked(o,i),s(o),F()}}function d(e){for(i=0;i<_.length;i++)_[i].id==e.id&&_.splice(i,1)}function c(e){for(NETWORK_DEBUG&&console.log("_replies :"+_.length),i=0;i<_.length;i++)if(_[i].id==e)return _[i]}function u(e){for(NETWORK_DEBUG&&console.log("_replies :"+_.length),i=0;i<_.length;i++)if(_[i].id==e)return _[i].commentId}function m(e){return varReplyParams={rid:"reply",timestamp:(new Date).getTime(),method:"GET",uri:encodeURI(e)}}function p(e){return varPostParams={rid:"reply",timestamp:(new Date).getTime(),method:"POST",uri:encodeURI(e)}}function g(e){T=e;var t=D+e;return m(t)}function f(e,t,i,o,n){var r="comment",a=t;void 0!=n&&1==n&&(r="reply",a=o),NETWORK_DEBUG&&console.log("Topicid : "+e,"commentid : "+t,"replydata : "+i);var s=p(G);return s.data={lang:"en",content:{sections:[{type:"html",html:i}]},target:{type:r,id:a},topicId:e,commentId:t},s}function h(e){return p(I+e)}function v(e){return p(w+e)}function R(e){return p(k+e+"?reason=spam")}function b(e){return p(N+e)}function y(e){for(var t=O.length;t>0;)t=O.length,O.pop();O.push(e)}function E(e){return o.isLikedById(_,e)}function U(e,t){if(e==I+t)l(t,!0);else if(e==w+t)l(t,!1);else{if(e==N+t)return _=o.deleteById(_,t),F(),0;e==k+t?_=o.flagById(_,!0):e==B+t?_=o.flagById(_,!1):e==P+t?_=o.hideById(_,!0):e==C+t&&(_=o.hideById(_,!1))}}var S,A,T,D="/v1.0/comment/replies/list/",G="/v1.0/reply/create",N="/v1.0/reply/delete/",I="/v1.0/reply/like/",w="/v1.0/reply/unlike/",P="/v1.0/reply/hide/",C="/v1.0/reply/unhide/",k="/v1.0/reply/flag/",B="/v1.0/reply/unflag/",O=[],_=[],F=function(){angular.forEach(O,function(e){e()})};return{replies:function(){return _},getTopicIdFromReply:function(){return A},getPostId:function(){return S},setPostId:function(e){S=e},setReplies:n,updateReply:a,appendToReplies:r,updateLikeReplyWithId:l,updateReplyLocalData:U,removeReply:d,getPostReplyRequest:f,likeReplyRequest:h,unlikeReplyRequest:v,deleteReplyRequest:b,flagReplyRequest:R,registerObserverCallback:y,getRepliesRequest:g,isReplyLiked:E,getCommentIdByReply:u}}]),angular.module("SocialModule").factory("VideoService",["Bant",function(e){function t(t){c=[];var i=t.data.results,o=i?i.length:0;if(i&&o>0){for(var n=0;o>n;n++){var r=e.bant(i[n]);if(r.id){for(var a=!0,s=0;s<u.length;s++)if(u[s].id===r.id){a=!1;break}if(c.push(r),1===o&&a&&"video_auto"===t.rid)return GEN_DEBUG&&console.log("$AUTO$ SINGLE REQUEST FOUND NEW VIDEO - NOTIFYING"),void f("new");a&&"video_auto"===t.rid&&u.push(r)}}"video"===t.rid?(m=t.data.nextOffset,f()):f(!0)}}function i(e,t){if(t===!0){for(var i=l.length;i>0;)i=l.length,l.pop();l.push(e)}else if("new"===t){for(var i=d.length;i>0;)i=d.length,d.pop();d.push(e)}else{for(var i=s.length;i>0;)i=s.length,s.pop();s.push(e)}}function o(e,t){var i=m,o={rid:"video",timestamp:(new Date).getTime(),method:"GET",uri:encodeURI(a+e+"?limit="+p+"&offset="+i+"&filter=video")};return NETWORK_DEBUG&&console.log("Video Request: ",o),o}function n(e){var t={rid:"video_auto",timestamp:(new Date).getTime(),method:"GET",uri:encodeURI(a+e+"?limit="+p+"&offset=0&filter=video")};return NETWORK_DEBUG&&console.log("Video Request Auto: ",t),t}function r(e){var t={rid:"video_auto",timestamp:(new Date).getTime(),method:"GET",uri:encodeURI(a+e+"?limit=1&offset=0&filter=video")};return NETWORK_DEBUG&&console.log("Video Request Single Auto: ",t),t}var a="/v1.0/channel/social/list/",s=[],l=[],d=[],c=[],u=[],m=0,p=10,g=0,f=function(e){e===!0?angular.forEach(l,function(e){console.log("Notify observer in autoRequest ",e),e()}):"new"===e?angular.forEach(d,function(e){console.log("Notify observer in newRequest ",e),e()}):angular.forEach(s,function(e){e()})};return{videoArray:function(){return c},resetVideoOffset:function(){m=0},setVideoData:t,getVideoDataRequest:o,getVideoDataRequestAuto:n,getVideoDataRequestAutoSingle:r,registerObserverCallback:i,videoArrayAutoLength:function(){return u.length},getPrevLength:function(){return g},setPrevLength:function(e){g=e}}}]),angular.module("SocialModule").factory("SocialService",["Bant",function(e){function t(t){c=[];var i=t.data.results,o=i?i.length:0;if(i&&o>0){for(var n=0;o>n;n++){var r=e.bant(i[n]);if(r.id){for(var a=!0,s=0;s<u.length;s++)if(u[s].id===r.id){a=!1;break}if(c.push(r),1===o&&a&&"social_auto"===t.rid)return GEN_DEBUG&&console.log("$AUTO$ SINGLE REQUEST FOUND NEW SOCIAL - NOTIFYING"),void f("new");a&&"social_auto"===t.rid&&u.push(r)}}"social"===t.rid?(m=t.data.nextOffset,f()):f(!0)}}function i(e,t){if(t===!0){for(var i=l.length;i>0;)i=l.length,l.pop();l.push(e)}else if("new"===t){for(var i=d.length;i>0;)i=d.length,d.pop();d.push(e)}else{for(var i=s.length;i>0;)i=s.length,s.pop();s.push(e)}}function o(e,t){var i=m,o={rid:"social",timestamp:(new Date).getTime(),method:"GET",uri:encodeURI(a+e+"?limit="+p+"&offset="+i)};return NETWORK_DEBUG&&console.log("Social Request: ",o),o}function n(e){var t={rid:"social_auto",timestamp:(new Date).getTime(),method:"GET",uri:encodeURI(a+e+"?limit="+p+"&offset=0")};return NETWORK_DEBUG&&console.log("Social Request Auto: ",t),t}function r(e){var t={rid:"social_auto",timestamp:(new Date).getTime(),method:"GET",uri:encodeURI(a+e+"?limit=1&offset=0")};return NETWORK_DEBUG&&console.log("Social Request Single Auto: ",t),t}var a="/v1.0/channel/social/list/",s=[],l=[],d=[],c=[],u=[],m=0,p=20,g=0,f=function(e){e===!0?angular.forEach(l,function(e){console.log("Notify observer in autoRequest ",e),e()}):"new"===e?angular.forEach(d,function(e){console.log("Notify observer in newRequest ",e),e()}):angular.forEach(s,function(e){e()})};return{socialArray:function(){return c},resetSocialOffset:function(){m=0},setSocialData:t,getSocialDataRequest:o,getSocialDataRequestAuto:n,getSocialDataRequestAutoSingle:r,registerObserverCallback:i,socialArrayAutoLength:function(){return u.length},getPrevLength:function(){return g},setPrevLength:function(e){g=e}}}]);
//# sourceMappingURL=app-post.min.js.map
