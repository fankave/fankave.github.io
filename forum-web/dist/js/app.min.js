angular.module("Forum",["ngRoute","ngSanitize","AuthModule","ChannelModule","TopicModule","PostModule","NetworkModule","MediaModule","SocialModule","UserInput","SmartStadiumModule"]).config(["$routeProvider","$locationProvider",function(e,t){e.when("/login",{templateUrl:"partials/facebookLogin.html",controller:"AuthController"}).when("/channel/:channelID",{templateUrl:"partials/login.html",controller:"ChannelController"}).when("/topic/:topicID",{templateUrl:"partials/topic.html",controller:"TopicController"}).when("/post/:postID",{templateUrl:"partials/post.html",controller:"PostController"}).when("/invalidTopic",{templateUrl:"partials/invalidTopic.html"}).otherwise({redirectTo:"/invalidTopic"}),window.history&&window.history.pushState&&HTML5_LOC&&t.html5Mode({enabled:!0})}]).filter("hashtags",["$filter","$sce",function(e,t){return function(o,i){if(!o)return o;var n=e("linky")(o,i),r="";angular.isDefined(i)&&(r=' target="'+i+'"');var a=/(^|\s)#(\w*[a-zA-Z_]+\w*)/gim;n=o.replace(a,'$1<a href="https://twitter.com/search?q=%23$2"'+r+">#$2</a>");var s=/(^|\s)\@(\w*[a-zA-Z_]+\w*)/gim;return n=n.replace(s,'$1<a href="https://twitter.com/$2"'+r+">@$2</a>"),t.trustAsHtml(n),n}}]),angular.module("Forum").directive("ngElementReady",[function(){return{priority:-1e3,restrict:"A",link:function(e,t,o){e.$eval(o.ngElementReady)}}}]),angular.module("ChannelModule",["NetworkModule","AuthModule"]).controller("ChannelController",["$scope","$window","$location","$sce","$routeParams","networkService","ChannelService","TopicService","URIHelper","AuthService","UserInfoService",function(e,t,o,i,n,r,a,s,l,c,d){a.setChannel(n.channelID),-1!==window.location.href.indexOf("?")&&(e.urlQueryStr=window.location.href.slice(window.location.href.indexOf("?")+1),GEN_DEBUG&&console.log(" $scope.urlQueryStr: "+e.urlQueryStr)),e.init=function(){r.init(),r.send(a.getLiveGameTopic())};var u=function(){var i=a.getLiveTopicId();void 0!==i&&(ga("send","pageview","/topic/"+i),GEN_DEBUG&&(console.log("Sent Pageview from /channel/"+i),console.log("Got Topic id from Channel : /topic/"+i+e.urlQueryStr)),HTML5_LOC?e.urlQueryStr?o.path("/topic/"+i).search(e.urlQueryStr):o.path("/topic/"+i):e.urlQueryStr?t.location="#/topic/"+i+"?"+e.urlQueryStr:t.location="#/topic/"+i)};a.registerObserverCallback(u),d.isUserLoggedIn()?(NETWORK_DEBUG&&console.log("User is logged in, checking for connection"),e.init()):l.isSmartStadiumUser()?(e.isSmartStadiumUser=!0,c.loginWithEmail()):l.isTechMUser()?(GEN_DEBUG&&console.log("MI16 User Detected"),t.location="#/login?MI16=true"):l.isMWCUser()?(GEN_DEBUG&&console.log("MWC User Detected"),t.location="#/login?MWC=true"):l.isPeelUser()?(e.isPeelUser=!0,c.loginWithPeel()):c.loginAsGuest()}]),angular.module("AuthModule",["NetworkModule","TopicModule"]).controller("AuthController",["$scope","$routeParams","$http","AuthService","UserInfoService","TopicService","ReplyService","networkService","ForumDeviceInfo","ChannelService","URIHelper",function(e,t,o,i,n,r,a,s,l,c,d){function u(){e.showFacebookButton=!1}if(-1!==window.location.href.indexOf("?")){var m=window.location.href.slice(window.location.href.indexOf("?")+1);GEN_DEBUG&&console.log("urlQueryStr: ",m),d.isTechMUser()&&(e.mUserType="MI16"),d.isMWCUser()&&(e.mUserType="MWC")}else e.facebookUser=!0;e.facebookUser?(!function(e,t,o){var i,n=e.getElementsByTagName(t)[0];e.getElementById(o)||(i=e.createElement(t),i.id=o,i.src="//connect.facebook.net/en_US/sdk.js",n.parentNode.insertBefore(i,n))}(document,"script","facebook-jssdk"),ga("send","pageview","Facebook Landing")):ga("send","pageview","Tech MI16 Landing"),e.showFacebookButton=!0,e.loginToFacebook=function(){i.loginToFacebook(u)},e.techMLogin=function(t,o,n){n&&i.techMLogin(t,o,e.mUserType),e.submitted=!0},window.fbAsyncInit=function(){FB.init({appId:"210324962465861",xfbml:!0,version:"v2.4"}),FB.getLoginStatus(function(t){if("connected"===t.status){e.showFacebookButton=!1;var o=i.setRegistrationParams("facebook",-25200,t.authResponse);i.registerUser(o)}else"not_authorized"===t.status?(e.showFacebookButton=!1,e.loginToFacebook()):e.showFacebookButton=!0})},e.focusMWC=function(){$("#techLoginContainer").animate({top:"-40px"},100)},e.blurMWC=function(){$("#techLoginContainer").animate({top:""},100)}}]),angular.module("TopicModule",["NetworkModule","SplashModule","AuthModule","MediaModule","angularFileUpload","SocialModule"]).controller("TopicController",["$scope","$rootScope","$sce","$window","$location","$sanitize","$timeout","$routeParams","networkService","TopicService","CommentService","UserInfoService","URIHelper","AuthService","SplashService","MUService","ForumStorage","FileUploader","SocialService","ChannelService","UserAgentService",function(e,t,o,n,r,a,s,l,c,d,u,m,p,g,f,h,v,T,U,E,S){function b(){if(void 0!==d.getTopic()){if(e.topicType=d.getTopicType(),d.isWatchingTopic()===!1&&(c.send(d.getFollowChannelRequest()),c.send(d.watchTopicRequest(l.topicID))),e.setScoreCardUI(),"livegame"==e.topicType){GEN_DEBUG&&console.log("Inside topic set :"+d.getTeamA()),e.leftTeam=d.getTeamA(),e.rightTeam=d.getTeamB();var o=d.getScore();void 0!=o&&(e.leftTeamScore=o.points[0],e.rightTeamScore=o.points[1]),e.gameStatus=d.getGameStatus(),"live"==e.gameStatus&&(e.gamePeriod=d.getGamePeriod(),e.gameClock=d.getGameClock()),e.gameScheduledTime=d.getGameTime(),e.allScoresTitle=d.getScoresTitle(),e.allScoresURL=d.getScoresLink();var i=$(".scoreCardContent"),n=$(".svg-content");i.css("background-color",e.leftTeam.pColor),n.css("fill",e.rightTeam.pColor)}e.topicTitle=d.getTitle();var r=d.getTopic();e.topicDescHtml=r.html,"media"==r.type&&(e.topicMediaUrl=r.mediaUrl,e.topicMediaAspectFeed=r.mediaAspectFull),e.createdAt=d.getTimeCreatedAt(),e.liked=d.getLiked();var a=d.getMetrics();e.likesCount=a.likes,e.commentsCount=a.comments,e.commentsCount&&0!==e.commentsCount||(e.loadingChat=!1),p.tabEntry()||("video"===p.getActiveTab()&&t.$broadcast("videoActive"),"social"===p.getActiveTab()&&t.$broadcast("socialActive"))}}function y(t){var o=u.comments();if(t&&(e.showNewCommentsIndicator=!1),void 0!=o&&(o.length>0||D===!0)){D=!1;var n=o.length;for(e.commentsArray=[],i=0;i<n;i++){var r={};r=o[i],r.postAuthorName=o[i].author.name,r.postAuthorPhoto=o[i].author.photo,r.isMyComment=m.isCurrentUser(o[i].author.id),r.likeCount=o[i].metrics.likes,r.replyCount=o[i].metrics.replies,r.postTimestamp=o[i].createdAt,"media"===r.type&&(r.mediaUrl=o[i].mediaUrl,r.mediaAspectFeed=o[i].mediaAspectFeed,r.mediaAspectFull=o[i].mediaAspectFull,r.mediaAspectRatio=o[i].mediaAspectRatio,r.mediaOrientation=o[i].mediaOrientation,r.mediaThumbUrl=o[i].mediaThumbUrl),r.isLiked=o[i].signal.like,"embed"===r.type&&(r.shared=!0,r.embed=o[i].embed,r.embed.embedCreatedAt=o[i].embedCreatedAt,r.embed.embedCreatedAtFull=o[i].embedCreatedAtFull,r.embedType=o[i].embedType,("media"===r.embedType||"link"===r.embedType)&&(r.mediaUrl=o[i].embedMedia.mediaUrl,r.mediaThumbUrl=o[i].embedMedia.mediaThumbUrl,r.mediaAspectFeed=o[i].embedMedia.mediaAspectFeed,r.mediaAspectFull=o[i].embedMedia.mediaAspectFull,r.mediaAspectRatio=o[i].embedMedia.mediaAspectRatio,r.mediaOrientation=o[i].embedMedia.mediaOrientation),"Twitter"===r.providerName?r.embed.embedLogo="img/twitterLogo@2x.png":r.embed.embedLogo=o[i].embed.provider.logo,"link"===o[i].embed.type&&o[i].embed.playable===!0&&(r.embedHtml=o[i].embedHtml)),e.commentsArray.push(r),i===n-1&&NETWORK_DEBUG&&console.log("Comments Array: ",e.commentsArray)}}}function C(){c.send(d.getTopicRequest(l.topicID)),c.send(u.getCommentsRequest(l.topicID))}var w=window.time,D=!1;S.isMobileUser()?(e.mobileBrowser=!0,e.mobileUserAgent=S.getMobileUserAgent(),GEN_DEBUG&&console.log("MOBILE USER AGENT: ",e.mobileUserAgent)):e.mobileBrowser=!1,e.commentsArray||(e.loadingChat=!0),void 0==E.getChannel()&&void 0==d.getChannel()&&(ga("send","pageview","/topic/"+l.topicID),GEN_DEBUG&&console.log("Sent Pageview from /topic/"+l.topicID)),d.setTopicId(l.topicID),e.topicType="livegame",e.innerButtonTapped=!1,m.isSmartStadiumUser()?(e.isSmartStadiumUser=!0,GEN_DEBUG&&console.log("SS USER HASNT VISITED"),e.hideSSSplash=!1,v.setToLocalStorage("hasUserVisited",!0),s(function(){e.continueToExperience("smartS")},7e3)):m.isMI16User()||p.isTechMUser()?e.isMI16User=!0:m.isMWCUser()||p.isMWCUser()?e.isMWCUser=!0:m.isPeelUser()?(e.isPeelUser=!0,m.hasUserVisited()||(GEN_DEBUG&&console.log("PEEL USER HASNT VISITED"),p.isSuperBowl()&&(e.SBSplash=!0),e.hidePeelSplash=!1,v.setToLocalStorage("hasUserVisited",!0),s(function(){e.continueToExperience("peel")},5e3))):(e.isPeelUser=!1,e.hidePeelSplash=!0,e.hideSSSplash=!0),e.continueToExperience=function(t){GEN_DEBUG&&console.log("CONTINUE XP CLICKED"),"peel"===t?(f.setPeelSplash(!0),e.hidePeelSplash=!0):"smartS"===t&&(f.setSSSplash(!0),e.hideSSSplash=!0)},e.setScoreCardUI=function(){"livegame"===e.topicType&&(e.isPeelUser?$("#topicSection").css("padding-top","54px"):e.isSmartStadiumUser?$("#topicSection").css("padding-top","54px"):e.isMI16User||$("#topicSection").css("padding-top","0px"))},e.activeTab="chat",e.switchTabs=function(t){var o=window.time-w;ga("send","event","Tabs","ActiveTab",e.activeTab),ga("send","event","Tabs","TabSessionLength",e.activeTab,o),w=window.time,"chat"===t&&(e.activeTab="chat",$(document).scrollTop(0),C()),"video"===t&&(e.activeTab="video",$(document).scrollTop(0)),"social"===t&&(e.activeTab="social",$(document).scrollTop(0)),GEN_DEBUG&&console.log("Active Tab: ",e.activeTab)},e.loadRemainingComments=function(){GEN_DEBUG&&console.log("LOADING REST OF COMMENTS..."),u.loadedComments()||(c.send(u.getCommentsRequest(l.topicID)),u.setLoadedComments(!0),e.loadedAllComments=!0)},e.loadRemainingCommentsTimeout=function(){s(function(){u.loadedComments()||(GEN_DEBUG&&console.log("LOADING REST OF COMMENTS..."),c.send(u.getCommentsRequest(l.topicID)),e.loadedAllComments=!0,u.setLoadedComments(!0))},7e3)},e.setPeelUI=function(t){e.isPeelUser=t},e.setPeelUI(e.isPeelUser),e.hideLoading=function(){GEN_DEBUG&&console.log("HIDING LOAD"),e.loadingChat=!1,e.loadingSocial=!1},e.initPage=function(){b(),y(),e.pageClass="page-topic",e.showNewCommentsIndicator=!1,e.topicID=l.topicID,C(),e.mobileBrowser===!0&&(document.getElementById("topicSection").style.paddingBottom="42px")},e.setLinksOnComments=function(){var t=document.getElementsByClassName("postRow");for(div in t){var o=t[div];o.onclick=function(t){$(t.target).is("a")||(thisPost=e.commentsArray[this.id],e.innerButtonTapped===!1&&(GEN_DEBUG&&console.log("Post Click Active: ",thisPost.id),HTML5_LOC?(r.path("/post/"+thisPost.id),e.$$phase||e.$apply()):n.location="#/post/"+thisPost.id),e.innerButtonTapped=!1)}}},m.isUserLoggedIn()?(NETWORK_DEBUG&&console.log("User is logged in, checking for connection"),c.isSocketConnected()||c.init(),e.initPage()):p.isSmartStadiumUser()?(e.isSmartStadiumUser=!0,GEN_DEBUG&&console.log("SS User? ",e.isSmartStadiumUser),g.loginWithEmail()):p.isTechMUser()?n.location="#/login?MI16=true":p.isMWCUser()?n.location="#/login?MWC=true":p.isPeelUser()?(e.isPeelUser=!0,e.setPeelUI(!0),g.loginWithPeel()):g.loginAsGuest(),e.peelClose=function(){ga("send","event","Peel","click","BackToPeelHome");var t=window.time-w;ga("send","event","Tabs","TabSessionLength",e.activeTab,t),w=window.time,GEN_DEBUG&&console.log("peelClose()"),window.location="peel://home"},e.peelWatchOnTV=function(){ga("send","event","Peel","click","PeelWatchOnTV"),GEN_DEBUG&&console.log("peelWatchOnTV()");var e=p.getPeelShowId();GEN_DEBUG&&console.log("Peel show on TV uri :  peel://tunein/"+e+"?action=SendIRorReminder&post_action=None"),void 0!=e?window.location="peel://tunein/"+e+"?action=SendIRorReminder&post_action=None":window.location="peel://home"},e.showNewCommentsIndicator=!1,e.newCommentsIndicatorTapped=function(){GEN_DEBUG&&console.log("newCommentsIndicatorTapped"),e.showNewCommentsIndicator=!1,y(),$(document).scrollTop(0)},e.imageClick=function(e){event.cancelBubble=!0,event.stopPropagation&&event.stopPropagation(),$.magnificPopup.open({items:{type:"image",src:e},type:"inline",callbacks:{open:function(){$("body").bind("touchmove",function(e){e.preventDefault()})},close:function(){$("body").unbind("touchmove")}}})},e.moreButtonTapped=function(){e.innerButtonTapped=!0},e.updateLikeTopic=function(){GEN_DEBUG&&console.log("TopicController update like Topic"),1==d.getLiked()?c.send(d.getUnlikeTopicRequest()):c.send(d.getLikeTopicRequest())},e.commentOnTopic=function(){document.getElementById("topicCommentField").focus()},e.updateLikeComment=function(t){e.innerButtonTapped=!0,GEN_DEBUG&&console.log("TopicController updateLike ("+t+")"),u.isCommentLiked(t)?c.send(u.getUnlikeCommentRequest(t)):c.send(u.getLikeCommentRequest(t))},e.deleteComment=function(t){GEN_DEBUG&&console.log("deleteComment("+t+")"),1===e.commentsArray.length&&(GEN_DEBUG&&console.log("Deleting Final Comment"),D=!0),e.innerButtonTapped=!0,c.send(u.deleteCommentRequest(t))},e.reportCommentAsSpam=function(t){GEN_DEBUG&&console.log("reportCommentAsSpam("+t+")"),e.innerButtonTapped=!0,c.send(u.flagCommentRequest(t))},e.goToRepliesWithKeyboardTriggered=function(e){d.directComment=!0,HTML5_LOC?r.path("/post/"+e):n.location="#/post/"+e},e.secureLink=function(e,t){return m.isGuestUser()?"":e+t};var k=function(){if(void 0==e.commentsArray)y();else{var t=u.comments(),o=t.length,i=u.getNumPinComments();e.commentsArray.length<o?m.isCurrentUser(t[i].author.id)?y():e.showNewCommentsIndicator=!0:y()}};d.registerObserverCallback(b),u.registerObserverCallback(k),u.registerObserverCallback(function(){y(!0)},!0),e.trustSrc=function(e){return o.trustAsResourceUrl(e)},n.addEventListener("beforeunload",function(){GEN_DEBUG&&console.log("Before Unload"),v.setToLocalStorage("lastTabActive",e.activeTab)}),e.xLinkActivated=!1;var G=E.getChannel();d.setChannel(G);var A,I,N,B,R,M,P,O,_=!1;e.setDocVars=function(){_||(A=$("#inputControls"),I=$(".tabContainer"),N=A.offset().top,B=I.height(),R=A.height(),M=document.documentElement.clientHeight,P=$(document).height(),_=!0,O=e.isSmartStadiumUser?54:e.isPeelUser?54:0)};var F=!1,L=function(){e.showNewCommentsIndicator&&(e.showNewCommentsIndicator=!1),$(document).scrollTop()>N-O&&P-M>N+R-B?(A.addClass("fixTabsPeel"),A.css("top",O),I.addClass("fixTabContainer"),$(".commentsContainer").css("padding-top",$("#inputControls").height()),F=!0):F&&(A.removeClass("fixTabsPeel"),A.css("top",""),I.removeClass("fixTabContainer"),$(".commentsContainer").css("padding-top",""),F=!1)};$(document).off("scroll"),$(document).on("scroll",L)}]),angular.module("SocialModule",["NetworkModule","ChannelModule","TopicModule"]).controller("SocialController",["$scope","$sce","$window","$routeParams","$http","SocialService","VideoService","networkService","ChannelService","TopicService","DateUtilityService","CommentService",function(e,t,o,i,n,r,a,s,l,c,d,u){function m(e){var t,o,i;"social"===e?(t=r.socialArray(),f.socialArray=f.socialArray||[],o=f.socialArray.length,i=f.socialArray):(t=a.videoArray(),f.videoArray=f.videoArray||[],o=f.videoArray.length,i=f.videoArray);var n=t.length;if(t&&n>0)for(var s=0;n>s;s++){for(var l=t[s],c=!1,d=0;o>d;d++)l.id===i[d].id&&(c=!0);c||(l.postAuthorName=t[s].embedAuthor.name,l.postAuthorAlias=t[s].embedAuthor.alias,l.postAuthorPhoto=t[s].embedAuthor.photo,l.tweetId=t[s].tweet.id,l.postTimestamp=t[s].createdAt,l.providerName=t[s].embedProvider.name,l.html=t[s].embedText,l.retweetCount=t[s].tweet.metrics.retweetCount,l.likeCount=t[s].tweet.metrics.likeCount,l.replyCount=t[s].tweet.metrics.replyCount,l.embed=t[s].embed,l.embed.embedCreatedAt=t[s].embedCreatedAt,"Twitter"===l.providerName?(l.providerLogo="img/twitterLogo@2x.png",l.embed.provider.logo="img/twitterLogo@2x.png"):(l.providerLogo=t[s].embedProvider.logo,l.embed.provider.logo=t[s].embedProvider.logo),l.embedType=t[s].embedType,l.embedUrl=t[s].embedUrl,"link"===t[s].embedType&&t[s].embedPlayable===!0&&(l.embedHtml=t[s].embedHtml,l.embedPlayable=!0),("media"===t[s].embedType||"link"===t[s].embedType)&&(l.mediaType=t[s].embedMedia.mediaType,l.mediaUrl=t[s].embedMedia.mediaUrl,l.mediaThumbUrl=t[s].embedMedia.mediaThumbUrl,l.mediaAspectRatio=t[s].embedMedia.mediaAspectRatio,l.mediaAspectFeed=t[s].embedMedia.mediaAspectFeed,l.mediaAspectFull=t[s].embedMedia.mediaAspectFull,l.mediaOrientation=t[s].embedMedia.mediaOrientation),"social"===e?f.socialArray.push(l):f.videoArray.push(l),NETWORK_DEBUG&&s===n-1&&("social"===e?console.log("Social Array: ",f.socialArray):console.log("Video Array: ",f.videoArray)))}}function p(e){if("social"===e)for(var t=0;t<f.socialArray.length;t++)f.socialArray[t].postTimestamp=d.getTimeSince(f.socialArray[t].createdAtFull);else for(var t=0;t<f.videoArray.length;t++)f.videoArray[t].postTimestamp=d.getTimeSince(f.videoArray[t].createdAtFull)}function g(e,t,o){var i;return function(){var n=this,r=arguments,a=function(){i=null,o||e.apply(n,r)},s=o&&!i;clearTimeout(i),i=setTimeout(a,t),s&&e.apply(n,r)}}console.log("Social Control");var f=this;this.initFeed=function(t){"social"===t?(f.socialArray||(e.$parent.loadingSocial=!0),f.socialArray&&p("social"),e.$parent.switchTabs("social"),r.resetSocialOffset(),f.loadContent("social")):(f.videoArray||(e.$parent.loadingSocial=!0),f.videoArray&&p("video"),e.$parent.switchTabs("video"),a.resetVideoOffset(),f.loadContent("video"))},e.$on("videoActive",function(e,t){URIHelper.tabEntered(),f.initFeed("video")}),e.$on("socialActive",function(e,t){URIHelper.tabEntered(),f.initFeed("social")}),this.loadContent=function(t,o){var i=l.getChannel()||c.getChannelId();"social"===e.$parent.activeTab||"social"===t?(NETWORK_DEBUG&&console.log("LOADING SOCIAL: ",i),s.send(r.getSocialDataRequest(i,o))):(NETWORK_DEBUG&&console.log("LOADING VIDEO: ",i),s.send(a.getVideoDataRequest(i,o)))},r.registerObserverCallback(function(){m("social")}),a.registerObserverCallback(function(){m("video")});var h=document.documentElement.clientHeight||window.innerHeight,v=g(function(){var t=$(document).height()-h-50;$(document).scrollTop()>t&&t>500&&("social"===e.activeTab?f.loadContent("social",f.socialArray.length):"video"===e.activeTab&&f.loadContent("video",f.videoArray.length))},100);$(document).on("scroll",v),this.retweetPost=function(e){n({method:"GET",url:"https://twitter.com/intent/retweet?tweet_id="+e,headers:{"Access-Control-Allow-Origin":"*"}})},this.shareTweetToChat=function(t){if(f.embedShareContent=t,f.showShareDialog=!0,GEN_DEBUG&&console.log("Embed Object: ",t),e.$parent.isPeelUser){var o=document.documentElement.clientHeight-54;GEN_DEBUG&&console.log("fullClient Height: ",o),setTimeout(function(){$("#sharePreviewContainer").css({top:"54px"}).height(o)},25)}},this.submitSharedPost=function(t,o){var i=e.$parent.topicID;GEN_DEBUG&&console.log("topicID From Parent: ",i),s.send(u.postCommentRequestForShare(i,t,o)),f.showShareDialog=!1,e.$parent.switchTabs("chat")},window.FB||!function(e,t,o){var i,n=e.getElementsByTagName(t)[0];e.getElementById(o)||(i=e.createElement(t),i.id=o,i.src="//connect.facebook.net/en_US/sdk.js",n.parentNode.insertBefore(i,n))}(document,"script","facebook-jssdk"),window.fbAsyncInit=function(){FB.init({appId:"210324962465861",xfbml:!0,version:"v2.4"})},this.shareToFacebook=function(e,t){FB.ui({method:"share",href:t},function(e){GEN_DEBUG&&console.log("FB Response Post-Share: ",e)})},this.exitShare=function(){f.showShareDialog=!1},this.highlightPost=function(){$("#postShareContent").css("color","rgb(22,189,231)")},this.unhighlightPost=function(){$("#postShareContent").css("color","rgb(211,214,215)")}}]),angular.module("UserInput",["NetworkModule","TopicModule","MediaModule","angularFileUpload"]).controller("UserInputController",["$scope","$window","$timeout","$routeParams","networkService","TopicService","CommentService","ReplyService","UserInfoService","FileUploader","MUService",function(e,t,o,i,n,r,a,s,l,c,d){function u(t){var o=t.target.files[0];if(GEN_DEBUG&&console.log("F:",o),!o.type.match("image.*"))var i="img/videoPrevIcon@2x.png";var n=new FileReader;n.onload=function(t){return function(t){var o=document.createElement("span");o.innerHTML=['<img class="thumb" src="',i||t.target.result,'"/>'].join(""),e.mobileBrowser!==!0||f?f||document.getElementById("preview").insertBefore(o,null):document.getElementById("mobilePreview").insertBefore(o,null)}}(o),n.readAsDataURL(o)}var m;m=DEV_BUILD===!0?"https://dev.fankave.com:8080":"https://mus.fankave.com";var p="/v1.0/media/upload",g=(this.uploader=new c({url:m+p,autoUpload:!1,removeAfterUpload:!0,queueLimit:1}),this);this.isHTML5=this.uploader.isHTML5,this.mediaType,this.uploader.filters.push({name:"customFilter",fn:function(e,t){var o=e.type;return-1!=o.indexOf("image")?(g.mediaType="image",this.queue.length<1&&e.size<5242880):-1!=o.indexOf("video")?(g.mediaType="video",this.queue.length<1&&e.size<268435456):this.queue.length<10}});var f;document.getElementById("fileUpload").addEventListener("change",u,!1),this.removeMedia=function(){g.uploader.clearQueue();var e=$("#fileUpload");e.wrap("<form>").closest("form").get(0).reset(),e.unwrap(),f=!1,g.unhighlightPost()},this.fileMaxExceeded=!1,this.uploader.onWhenAddingFileFailed=function(e,t,i){f=!0,GEN_DEBUG&&console.info("onWhenAddingFileFailed",e,t,i),g.isHTML5?g.uploader.queue.length<1&&(g.fileMaxExceeded=!0,g.removeMedia(),o(function(){g.fileMaxExceeded=!1},5e3)):(GEN_DEBUG&&console.log("Browser Doesn't Support HTML5"),g.HTML5warning=!0)},this.uploader.onAfterAddingFile=function(e){GEN_DEBUG&&console.info("onAfterAddingFile",e),g.highlightPost()},this.uploader.onAfterAddingAll=function(e){GEN_DEBUG&&console.info("onAfterAddingAll",e)},this.uploader.onBeforeUploadItem=function(e){var t=l.getUserCredentials();e.headers={"X-UserId":t.userId,"X-SessionId":t.sessionId,"X-AccessToken":t.accessToken},e.formData=[{type:e._file.type},{size:e._file.size},{file:e._file}],GEN_DEBUG&&console.info("onBeforeUploadItem",e)},this.uploader.onProgressItem=function(e,t){GEN_DEBUG&&console.info("onProgressItem",e,t)},this.uploader.onProgressAll=function(e){GEN_DEBUG&&console.info("onProgressAll",e)},this.uploader.onSuccessItem=function(e,t,o,i){GEN_DEBUG&&console.info("onSuccessItem",e,t,o,i),n.send(d.postMediaRequest(t))},this.uploader.onErrorItem=function(e,t,o,i){GEN_DEBUG&&console.info("onErrorItem",e,t,o,i)},this.uploader.onCancelItem=function(e,t,o,i){GEN_DEBUG&&console.info("onCancelItem",e,t,o,i)},this.uploader.onCompleteItem=function(e,t,o,i){GEN_DEBUG&&console.info("onCompleteItem",e,t,o,i)},this.uploader.onCompleteAll=function(){GEN_DEBUG&&console.info("onCompleteAll"),g.uploader.clearQueue(),d.resetCommentParams()},GEN_DEBUG&&console.info("uploader",this.uploader),this.postComment=function(t,o){g.uploader.queue.length>0&&o?d.setCommentParams(e.topicID,t,!0):g.uploader.queue.length>0&&!o?d.setCommentParams(e.topicId,t,!1,e.postID):t&&""!==t&&o?n.send(a.postCommentRequest(e.topicID,t)):t&&""!==t&&!o&&n.send(s.getPostReplyRequest(e.topicId,e.postID,t)),g.uploader.uploadAll(),e.commentText="",$("input#topicCommentField").blur(),$("#postCommentButton").css("color","rgb(211,214,215)"),o?$(document).scrollTop(0):window.scrollTo(0,document.body.scrollHeight)},this.highlightPost=function(){GEN_DEBUG&&console.log("Styling post"),$("#postCommentButton").css("color","rgb(22,189,231)")},this.unhighlightPost=function(){GEN_DEBUG&&console.log("Styling post"),$("#postCommentButton").css("color","rgb(211,214,215)")},this.mobileHighlightPost=function(){$("#postCommentButton").css("color","rgb(22,189,231)")},this.mobileUnhighlightPost=function(){$("#postCommentButton").css("color","rgb(22,189,231)")},$("input#topicCommentField").bind("focusin focus",function(e){e.preventDefault()}),$("input").bind("focusin focus",function(e){e.preventDefault()})}]),angular.module("Forum").factory("UserAgentService",["ForumStorage","UserInfoService",function(e,t){function o(){var e;return i()&&(/iPad|iPhone|iPod/i.test(navigator.userAgent)&&!window.MSStream?e="iOS":/Android/i.test(navigator.userAgent)?e="android":/IEMobile/i.test(navigator.userAgent)&&(e="windows")),r=e,e}function i(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e}function n(e){return r===e?!0:!1}var r;return{getMobileUserAgent:o,isMobileUser:i,isUserAgent:n}}]),angular.module("NetworkModule",["ngWebSocket"]).factory("networkService",["$websocket","$route","DataService","UserInfoService",function(e,t,o,i){function n(){function t(){var e=i.getUserCredentials(),t=WEBSOCKET_BASE_URI+"userId="+e.userId+"&sessionId="+e.sessionId+"&accessToken="+e.accessToken+"/";return NETWORK_DEBUG&&console.log("socketUri: "+t),t}void 0!=r&&r.close(),r=e(t()),o.setWatchTopic(!1),r.onOpen(function(){NETWORK_DEBUG&&console.log("Websocket Connected")}),r.onClose(function(e){r=void 0,NETWORK_DEBUG&&console.log("Websocket Closed :"+e.data)}),r.onMessage(function(e){NETWORK_DEBUG&&console.log("Websocket Message Recieved :  "+e.data);var t=JSON.parse(e.data),i=t.rid;void 0!==i&&("channel"===i&&(NETWORK_DEBUG&&console.log("Processing Channel"),o.setChannel(t)),"topic"===i||"score"===i?(NETWORK_DEBUG&&console.log("Processing Topic"),o.setTopic(t)):"comment"===i?(NETWORK_DEBUG&&console.log("Processing Comments"),o.setComments(t)):"reply"===i?(NETWORK_DEBUG&&console.log("Processing Reply"),o.setReplies(t)):"social"===i?(NETWORK_DEBUG&&console.log("Processing Social"),o.setSocial(t)):"video"===i&&(NETWORK_DEBUG&&console.log("Processing Video"),o.setVideo(t)))}),r.onError(function(e){NETWORK_DEBUG&&console.log("Websocket OnError: ",e)})}var r;return disconnectSocket=function(){NETWORK_DEBUG&&console.log("Disconnect Callback triggered"),void 0!==r&&(r.close(),r=void 0)},reconnectSocket=function(){NETWORK_DEBUG&&console.log("Reconnect Callback triggered"),t.reload()},{isSocketConnected:function(){return NETWORK_DEBUG&&(null!=r?NETWORK_DEBUG&&console.log("ws status : "+r.readyState+"ws.OPEN :"+r.OPEN):NETWORK_DEBUG&&console.log("ws is null")),void 0!=r&&1==r.readyState?!0:!1},send:function(e){void 0==r&&n(),r.send(JSON.stringify(e))},init:n}}]),angular.module("NetworkModule").factory("ForumStorage",function(){function e(e,t){void 0!=localStorage&&i&&localStorage.setItem(e,t)}function t(e){return void 0!=localStorage&&i?localStorage.getItem(e):void 0}function o(){void 0!=localStorage&&i&&localStorage.clear()}var i=!1;return void 0!=typeof Storage?(NETWORK_DEBUG&&console.log("Local storage available :"+typeof Storage),i=!0):NETWORK_DEBUG&&console.log("Sorry! No Storage support on this browser.."),{getFromLocalStorage:t,setToLocalStorage:e,clearStorage:o}}),angular.module("NetworkModule").factory("ForumDeviceInfo",["ForumStorage",function(e){function t(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}function o(){GEN_DEBUG&&console.log("GEnerating UUID");var e=t()+t(!0)+t(!0)+t();return GEN_DEBUG&&console.log(" UUID :"+e),e}return{getDeviceId:function(){var t=e.getFromLocalStorage("forumUUID");return(void 0==t||t.length<15)&&(t=o(),e.setToLocalStorage("forumUUID",t)),GEN_DEBUG&&console.log("generated ID : "+t),t}}}]),angular.module("NetworkModule").factory("URIHelper",["ForumStorage",function(e){function t(){for(var e,t=[],o=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),i=0;i<o.length;i++)e=o[i].split("="),t.push(e[0]),t[e[0]]=e[1];return t}var o,i,n,r,a,s,l,c;return{isPeelUser:function(){var r=t();if(r.peel){i=r.userId,o=r.userName,n=r.showId;e.getFromLocalStorage("forumUserType");return e.setToLocalStorage("forumPeelUserId",i),e.setToLocalStorage("forumPeelShowId",n),!0}return!1},isSmartStadiumUser:function(){var o=t();return o.smartStadium?(a=o.userId,r=o.userName,e.setToLocalStorage("forumSmartStadiumUserId",a),!0):!1},isTechMUser:function(){var o=t();return o.MI16?(s=!0,e.setToLocalStorage("techMIUser",!0),!0):s?!0:!1},isMWCUser:function(){var o=t();return o.MWC?(l=!0,e.setToLocalStorage("MWCUser",!0),!0):l?!0:!1},getPeelUserId:function(){return i},getPeelUserName:function(){return o},getPeelShowId:function(){return n},getPeelParams:function(){return window.location.search.substring(1)},getSSUserId:function(){return a},getSSUserName:function(){return r},getActiveTab:function(){var e=t();if(e.tab){if("video"===e.tab)return"video";if("social"===e.tab)return"social"}},isSuperBowl:function(){var e=t();return e.superbowl?!0:!1},tabEntered:function(){c=!0},tabEntry:function(){return c},extractOffset:function(e){var t=e.slice(e.indexOf("offset")),o=t.split("=");return o[1]}}}]),angular.module("ChannelModule").factory("ChannelService",["DateUtilityService","Bant","FDSUtility",function(e,t,o){function i(e){void 0!=e.data&&(s=e.data.id,NETWORK_DEBUG&&console.log("_liveTopicId : "+s),c())}function n(e){var t=e||a,o="/v1.0/channel/topic/show/"+t+"?type=livegame";("404"==t||"5066"==t)&&(o="/v1.0/channel/topic/show/"+t);var i={rid:"channel",timestamp:(new Date).getTime(),method:"GET",uri:o};return NETWORK_DEBUG&&console.log("Ch.getLiveGameTopic: ",i),i}function r(e){for(var t=l.length;t>0;)t=l.length,l.pop();l.push(e)}var a,s,l=[],c=function(){angular.forEach(l,function(e){e()})};return{setTopicData:i,getLiveTopicId:function(){return s},getLiveGameTopic:n,setChannel:function(e){a=e},getChannel:function(){return a},registerObserverCallback:r}}]),angular.module("TopicModule").directive("secureClick",["$location","$window","UserInfoService",function(e,t,o){return{restrict:"A",link:function(i,n,r){var a=n[0];$(a).on("click",function(n){n.preventDefault(),o.isGuestUser()?HTML5_LOC?e.path("/login"):t.location="#/login":i.$eval(r.secureClick)})}}}]),angular.module("TopicModule").directive("secureFocus",["$location","$window","UserInfoService",function(e,t,o){return{restrict:"A",link:function(i,n,r){var a=n[0];$(a).on("focus",function(n){n.preventDefault(),o.isGuestUser()?HTML5_LOC?e.path("/login"):t.location="#/login":i.$eval(r.secureFocus)})}}}]),angular.module("TopicModule").directive("repeatFinishedNotify",function(){return function(e,t,o){e.$last&&(e.hideLoading(),e.setLinksOnComments(),e.setDocVars(),e.continueToExperience("smartS"))}}),angular.module("TopicModule").directive("embedSharedContent",["UserAgentService",function(e){
return{restrict:"E",scope:{thisPost:"=embedPost",trustSource:"&",preventNav:"&"},link:function(t,o,i){t.mobileUserAgent=e.getMobileUserAgent()},templateUrl:"partials/shared.html"}}]),angular.module("TopicModule").directive("mediaPlayer",["$sce","UserAgentService",function(e,t){return{restrict:"E",scope:{thisPost:"=",vidIndex:"@"},link:function(o,i,n){function r(e){var t;return e.mediaAspectFeed.y?t="-"+e.mediaAspectFeed.y+"px":e.mediaAspectFull.y&&(t="-"+e.mediaAspectFull.y+"px"),t}function a(e){var t;return e.mediaAspectFeed.x?t="-"+e.mediaAspectFeed.x+"px":e.mediaAspectFull.x&&(t="-"+e.mediaAspectFull.x+"px"),t}o.isMobileUser=t.isMobileUser(),o.trustSrc=function(t){return e.trustAsResourceUrl(t)};var s=i[0].firstElementChild.childNodes[1],l=i[0].firstElementChild.childNodes[7];$(s).on("waiting",function(){GEN_DEBUG&&console.log("Video Waiting"),o.isMobileUser?(l.className="media-loading-fullscreen",l.style.zIndex="2147483647"):l.className="media-loading"}),$(s).on("stalled",function(){GEN_DEBUG&&console.log("Video Stalled"),o.isMobileUser?(l.className="media-loading-fullscreen",l.style.zIndex="2147483647"):l.className="media-loading"});var c;$(s).on("canplay",function(){c=!0}),$(s).on("playing",function(){GEN_DEBUG&&console.log("Video Playing"),l.className="media-loading-default"}),$(s).on("play",function(){GEN_DEBUG&&console.log("Video play clicked"+o.thisPost.id),ga("send","event","Video","Play",o.thisPost.id)}),$(s).on("pause",function(){var e=Math.round(s.currentTime);GEN_DEBUG&&console.log("Video paused"+o.thisPost.id+": TimePlayed "+e),ga("send","event","Video","VideoLengthPlayed",o.thisPost.id,e)}),$(s).on("ended",function(){Math.round(s.currentTime)}),o.togglePlayPause=function(e){var t=i[0].firstElementChild.childNodes,n=t[1],r=t[3],a=t[5],s=t[7];n.paused||n.ended?(a.className="pause",r.className="pause",n.play(),o.isMobileUser&&(n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.msRequestFullscreen&&n.msRequestFullscreen())):(s.className="media-loading-default",a.className="media-controls",r.className="media-thumbnail",n.pause())},o.setAspectRatio=function(e,t){GEN_DEBUG&&console.log("setAspectRatio: ",e,t);var o=[];return"portrait"===t?1.778===e?o.push("video-portrait-9x16"):o.push("video-portrait-1x2"):"square"===t?o.push("video-square"):1.778===e?o.push("video-landscape-16x9"):o.push("video-landscape-2x1"),o},o.setDimensions=function(e,t,n){var s=i[0].firstElementChild.childNodes,l=s[1],c=$(l).width();GEN_DEBUG&&(console.log("Elem in setD: ",i),console.log("PlayerNodes in setD: ",s),console.log("Video in setD: ",l),console.log("Width in setD: ",c)),o.isMobileUser&&1===e&&c>380?c=381:1===e&&c>300&&(c=300),1.778===e&&c>533&&(c=533),2===e&&c>600&&(c=600);var d={},u=c/e;return(1.778===e||2===e)&&u>300&&(u=300),d.height=u,n&&(d["background-image"]="url("+n.mediaThumbUrl+")",d["background-size"]="cover",d["background-position-y"]=r(n),d["background-position-x"]=a(n)),GEN_DEBUG&&console.log("Set Dimensions Object: ",d),d}},templateUrl:"partials/mediaPlayer.html"}}]),angular.module("TopicModule").directive("embedPlayer",["$sce","UserAgentService",function(e,t){return{restrict:"E",scope:{thisPost:"="},link:function(o,i,n){o.isMobileUser=t.isMobileUser(),o.trustSrcHtml=function(t){return e.trustAsHtml(t)},o.setAspectRatio=function(e,t){NETWORK_DEBUG;var o=[];return"portrait"===t?1.778===e?o.push("video-portrait-9x16"):o.push("video-portrait-1x2"):"square"===t?o.push("video-square"):1.778===e?o.push("video-landscape-16x9"):o.push("video-landscape-2x1"),o},o.setDimensions=function(e,t,n){var r=i[0].childNodes,a=r[0],s=$(a).width();GEN_DEBUG&&(console.log("PlayerNodes in setD: ",r),console.log("Video in setD: ",a),console.log("Width in setD: ",s)),o.isMobileUser&&1===e&&s>380?s=381:1===e&&s>300&&(s=300),1.778===e&&s>533&&(s=533),2===e&&s>600&&(s=600);var l=s/e;(1.778===e||2===e)&&l>300&&(l=300);var c=a.childNodes[0];$(c).css("height",l),GEN_DEBUG&&console.log("Setting Height On: ",c,l)}},templateUrl:"partials/embedPlayer.html"}}]),angular.module("TopicModule").directive("imageControl",["$sce",function(e){return{restrict:"E",scope:{thisPost:"="},link:function(e,t,o){function i(e,t,o){var i,n;if("y"===t&&e.mediaAspectFeed.y){n=o/e.mediaAspectFeed.h;var r=e.mediaAspectFeed.y*n;i="-"+r+"px"}if("x"===t&&e.mediaAspectFeed.x){n=o/e.mediaAspectFeed.w;var a=e.mediaAspectFeed.x*n;i="-"+a+"px"}return i}e.imageClick=function(e){event.cancelBubble=!0,event.stopPropagation&&event.stopPropagation(),$.magnificPopup.open({items:{type:"image",src:e},type:"inline",callbacks:{open:function(){$("body").bind("touchmove",function(e){e.preventDefault()})},close:function(){$("body").unbind("touchmove")}}})},e.setAspectRatio=function(e,t){GEN_DEBUG&&console.log("setAspectRatio: ",e,t);var o=[];return"portrait"===t?1.778===e?o.push("image-portrait-9x16"):o.push("image-portrait-1x2"):"square"===t?o.push("image-square"):1.778===e?o.push("image-landscape-16x9"):o.push("image-landscape-2x1"),o},e.setDimensions=function(o,n,r){var a=t[0].childNodes[0],s=$(a).width();GEN_DEBUG&&(console.log("Image in setD: ",a),console.log("Width in setD: ",s)),e.isMobileUser&&1===o&&s>380?s=381:1===o&&s>300&&(s=300),1.778===o&&s>533&&(s=533),2===o&&s>600&&(s=600);var l={},c=s/o;return(1.778===o||2===o)&&c>300&&(c=300),l.height=c,r&&(l["background-image"]="url("+r.mediaUrl+")",l["background-size"]="cover",l["background-position-y"]=i(r,"y",c)||"",l["background-position-x"]=i(r,"x",s)||""),GEN_DEBUG&&console.log("Set Dimensions Object: ",l),l}},templateUrl:"partials/imageControl.html"}}]),angular.module("NetworkModule").service("DataService",["TopicService","CommentService","ReplyService","ChannelService","SocialService","VideoService",function(e,t,o,i,n,r){function a(o){if(o.error)NETWORK_DEBUG&&console.log("Comments Error message from network: ",o.error);else if(o.push)"UPSERT"==o.method&&(0==t.updateComment(o)?e.updateCommentCount(1):"REMOVE"==o.method);else if("POST"==o.method){var i=o.uri;if(void 0!=i){var n=i.slice(-m);"/v1.0/comment/create"==i?(t.appendToComments(o),e.updateCommentCount(1)):0==t.updateCommentLocalData(i,n)&&e.updateCommentCount(-1)}}else t.setComments(o)}function s(t){t.error?NETWORK_DEBUG&&console.log("Topic Error message from network: ",t.error):t.push?"UPSERT"==t.method?e.updateTopic(t.data):"REMOVE"==t.method&&e.removeTopic(t.data):e.setTopic(t)}function l(e){if(e.error)NETWORK_DEBUG&&console.log("Topic Error message from network: ",e.error);else if(e.push)NETWORK_DEBUG&&console.log("reply pushed "),"UPSERT"==e.method&&(0===o.updateReply(e)?void 0!=e.data&&t.updateReplyCountById(e.data.commentId,1):"REMOVE"==e.method);else if("POST"==e.method){var i=e.uri;if(void 0!=i){var n=i.slice(-m);if("/v1.0/reply/create"==i)o.appendToReplies(e),void 0!=e.data&&t.updateReplyCountById(e.data.commentId,1);else{var r=o.getCommentIdByReply(n);0==o.updateReplyLocalData(i,n)&&t.updateReplyCountById(r,-1)}}}else o.setReplies(e)}function c(e){e.error?NETWORK_DEBUG&&console.log("Topic Error message from network: ",e.error):(NETWORK_DEBUG&&console.log("delegateSetChannel: ",e),i.setTopicData(e))}function d(e){e.error?NETWORK_DEBUG&&console.log("Social Error message from network: ",e.error):(NETWORK_DEBUG&&console.log("SOCIAL GET"),n.setSocialData(e))}function u(e){e.error?NETWORK_DEBUG&&console.log("Video Error message from network: ",e.error):(NETWORK_DEBUG&&console.log("VIDEO GET"),r.setVideoData(e))}var m=16;return{setVideo:u,setSocial:d,setChannel:c,setTopic:s,setComments:a,setReplies:l,setWatchTopic:function(t){e.setWatchTopic(t)}}}]),angular.module("TopicModule").service("TopicService",["DateUtilityService","Bant","FDSUtility",function(e,t,o){function i(o){void 0!=o.data?(void 0!=o.data.content&&(v=o.data.content.title),f=o.data.topicType,NETWORK_DEBUG&&console.log("TOPIC TYPE :"+f),h=o.data.id,"livegame"==f&&(T=o.data.game,void 0!=T&&(b=e.getGameScheduledTime(T.scheduledAt),E=T.score,void 0==E.live&&void 0==E["final"]?U="future":1==E.live?U="live":1==E["final"]&&(U="past"),"live"==U&&(NETWORK_DEBUG&&console.log("_gameStats"+E.status),S=E.status))),g=t.bant(o.data),I()):"POST"==o.method&&(o.uri==k+h?(NETWORK_DEBUG&&console.log("Topic watch success"),G=!0):o.uri==w+h?(NETWORK_DEBUG&&console.log("Topic liked success"),g=t.updateBantLiked(g,!0),I()):o.uri==D+h&&(NETWORK_DEBUG&&console.log("Topic unliked success"),g=t.updateBantLiked(g,!1),I()))}function n(e){NETWORK_DEBUG&&console.log("Topic Service scoreData :"+e),r(e)}function r(e){E=e,void 0!=E&&(1==E.live&&(U="live"),S=E.status,NETWORK_DEBUG&&(console.log("Game Points :"+E.points[0]+" : : "+E.points[1]),console.log("Game Period :"+S[0]),console.log("Game Period :"+S[1])),I())}function a(e){NETWORK_DEBUG&&console.log("Update comment count: "+g.metrics.comments+"     Value : "+e),void 0!=g&&void 0!=g.metrics&&(1==e?void 0==g.metrics.comments?g.metrics.comments=1:g.metrics.comments=g.metrics.comments+1:void 0==g.metrics.comments?g.metrics.comments=0:g.metrics.comments=g.metrics.comments-1),I()}function s(e){var t=C+e;return varTopicParams={rid:"topic",timestamp:(new Date).getTime(),method:"GET",uri:encodeURI(t)}}function l(){var e=0;void 0!=g&&void 0!=g.owner&&(e=g.owner.id),p=e;var t="/v1.0/channel/follow/"+e;return varTopicParams={rid:"topic",timestamp:(new Date).getTime(),method:"POST",uri:encodeURI(t)}}function c(e){var t=k+e;return varTopicParams={rid:"topic",timestamp:(new Date).getTime(),method:"POST",uri:encodeURI(t)}}function d(){return NETWORK_DEBUG&&console.log("Like topic request invoked"+h),varLikeParams={rid:"topic",timestamp:(new Date).getTime(),method:"POST",uri:encodeURI(w+h)}}function u(){return varLikeParams={rid:"topic",timestamp:(new Date).getTime(),method:"POST",uri:encodeURI(D+h)}}function m(e){for(var t=A.length;t>0;)t=A.length,A.pop();A.push(e)}var p,g,f,h,v,T,U,E,S,b,y,C="/v1.0/topic/show/",w="/v1.0/topic/like/",D="/v1.0/topic/unlike/",k="/v1.0/topic/watch/",G=!1,A=[],I=function(){angular.forEach(A,function(e){e()})};return{getTopic:function(){return g},getTopicId:function(){return h},getTopicType:function(){return f},getGame:function(){return T},getGameTime:function(){return b},getTeamA:function(){return void 0!=T?T.teams[0]:void 0},getTeamB:function(){return void 0!=T?T.teams[1]:void 0},getScoresTitle:function(){return void 0!=T&&void 0!=T.links?T.links[0].title:void 0},getScoresLink:function(){return void 0!=T&&void 0!=T.links?T.links[0].url:void 0},getScore:function(){return void 0!=E?E:void 0},getGameStatus:function(){return U},getGamePeriod:function(){return S[0]},getGameClock:function(){return S[1]},getChannelId:function(){return void 0!=g?g.owner.id:void 0},getTitle:function(){return v},getHtml:function(){return void 0!=g?g.html:void 0},getTimeCreatedAt:function(){return void 0!=g?g.createdAt:void 0},getLiked:function(){return void 0!=g?g.signal.like:void 0},getMetrics:function(){return void 0!=g?g.metrics:void 0},watchTopicRequest:c,getLikeTopicRequest:d,getUnlikeTopicRequest:u,getFollowChannelRequest:l,getTopicRequest:s,isWatchingTopic:function(){return G},setWatchTopic:function(e){G=e},setTopicId:function(e){h=e},setChannel:function(e){p=e},getChannel:function(){return p},setTopic:i,updateTopic:n,updateCommentCount:a,registerObserverCallback:m,directComment:y}}]),angular.module("SplashModule",[]).factory("SplashService",function(){var e=!0,t=!0;return{hidePeelSplash:function(){return e},hideSSSplash:function(){return t},setPeelSplash:function(t){e=t},setSSSplash:function(e){t=e}}}),angular.module("NetworkModule").factory("CommentService",["Bant","DateUtilityService","FDSUtility","URIHelper",function(e,t,o,n){function r(t){if(L=[],tempCommentsData=t.data.results,void 0!=tempCommentsData&&tempCommentsData.length>0){var o=tempCommentsData.length;for(i=0;i<o;i++){var r={};r=e.bant(tempCommentsData[i]),void 0!=r.id&&L.push(r)}"10"===n.extractOffset(t.uri)?(NETWORK_DEBUG&&console.log("Set Rest of Comments"),K(!0)):(NETWORK_DEBUG&&console.log("Set Comments"),K()),$=t.data.nextOffset}else{var a=t.data;if("GET"==t.method&&t.uri.substring(0,G.length)==G){NETWORK_DEBUG&&console.log("Processing Show comment");var r={};r=e.bant(a),void 0!=r.id&&L.push(r),K()}}}function a(t){var o=t.data;if(void 0!=o){var i={};if(i=e.bant(o),void 0!=i.id){var n=0;if(L.length>0)for(;1==L[n].pin;)n++;W=n,W>0?L.splice(n,0,i):L.unshift(i)}}K()}function s(t){var o=t.data;for(i=0;i<L.length;i++)if(L[i].id==o.id)return L[i]=e.bant(o),1;return a(t),NETWORK_DEBUG&&console.log("In Comment Service update comment"),0}function l(e){for(i=0;i<L.length;i++)if(L[i].id==e.id)return void(L[i]=e)}function c(t,o){if(NETWORK_DEBUG&&console.log("updateLikeCommentWithId :"+t+"   liked "+o),void 0!=t){var i;i=u(t),i=e.updateBantLiked(i,o),l(i),K()}}function d(e){var t=e.data;for(i=0;i<L.length;i++)if(L[i].id==t.id)return L.splice(i,1),0;return 1}function u(e){for(NETWORK_DEBUG&&console.log("_comments :"+L.length),i=0;i<L.length;i++)if(L[i].id==e)return L[i]}function m(e,t){if(t){for(var o=F.length;o>0;)o=F.length,F.pop();F.push(e)}else{for(var o=_.length;o>0;)o=_.length,_.pop();_.push(e)}}function p(e){var t;return t=0===$?"?limit=10&offset="+$:"?offset="+$,{rid:"comment",timestamp:(new Date).getTime(),method:"GET",uri:encodeURI(e+t)}}function g(e){return{rid:"comment",timestamp:(new Date).getTime(),method:"POST",uri:encodeURI(e)}}function f(e){var t=k+e;return p(t)}function h(e){var t=G+e;return p(t)}function v(e,t){var o=g(A);return o.data={lang:"en",content:{sections:[{type:"html",html:t}]},topicId:e},o}function T(e,t,o){var i={media:[o]},n=g(A);return n.data={lang:"en",content:{sections:[{type:"html",html:t},{type:"media"}]},topicId:e},n.data.content.sections[1].media=i.media,NETWORK_DEBUG&&console.log("Media comment Request :"+JSON.stringify(n,null,10)),n}function U(e,t,o){var i=g(A);return i.data={lang:"en",content:{sections:[{type:"html",html:t},{type:"embed"}]},topicId:e},i.data.content.sections[1].embed=o,NETWORK_DEBUG&&console.log("Media comment Request :"+JSON.stringify(i,null,10)),i}function E(e){return g(N+e)}function S(e){return g(B+e)}function b(e){return g(P+e+"?reason=spam")}function y(e){return g(I+e)}function C(e){return o.isLikedById(L,e)}function w(e,t){if(void 0!=e){var o=u(e);void 0!=o&&(NETWORK_DEBUG&&console.log("found element :"+o+" tempStructure.metrics.replies :"+o.metrics.replies),-1==t?void 0==o.metrics.replies?o.metrics.replies=0:o.metrics.replies=o.metrics.replies-1:void 0==o.metrics.replies?o.metrics.replies=1:o.metrics.replies=o.metrics.replies+1,l(o),NETWORK_DEBUG&&console.log("found element updated to :"+o+" tempStructure.metrics.replies :"+o.metrics.replies),K())}}function D(e,t){if(e==N+t)c(t,!0);else if(e==B+t)c(t,!1);else{if(e==I+t)return L=o.deleteById(L,t),K(),0;e==P+t?L=o.flagById(L,!1):e==O+t?L=o.flagById(L,!1):e==R+t?L=o.hideById(L,!0):e==M+t&&(L=o.hideById(L,!1))}}var k="/v1.0/topic/comments/list/",G="/v1.0/comment/show/",A="/v1.0/comment/create",I="/v1.0/comment/delete/",N="/v1.0/comment/like/",B="/v1.0/comment/unlike/",R="/v1.0/comment/hide/",M="/v1.0/comment/unhide/",P="/v1.0/comment/flag/",O="/v1.0/comment/unflag/",_=[],F=[],L=[],W=0,$=0,x=!1,K=function(e){e?angular.forEach(F,function(e){e()}):angular.forEach(_,function(e){e()})};return{comments:function(){return L},setComments:r,updateComment:s,appendToComments:a,updateLikeCommentWithId:c,updateCommentLocalData:D,updateReplyCountById:w,removeComment:d,postCommentRequest:v,postCommentRequestForMedia:T,postCommentRequestForShare:U,getLikeCommentRequest:E,getUnlikeCommentRequest:S,registerObserverCallback:m,getCommentsRequest:f,getCommentById:u,getCommentByIdRequest:h,deleteCommentRequest:y,flagCommentRequest:b,isCommentLiked:C,getNumPinComments:function(){return W},loadedComments:function(){return x},setLoadedComments:function(e){x=e}}}]),angular.module("SocialModule").factory("VideoService",["Bant",function(e){function t(t){s=[];var o=t.data.results,n=o.length;if(o&&n>0){for(i=0;i<n;i++){var r=e.bant(o[i]);if(r.id){var a=!0;for(i=0;i<s.length;i++)if(s[i].id==r.id){a=!1;break}a&&s.push(r)}}l=t.data.nextOffset,d()}}function o(e){for(var t=a.length;t>0;)t=a.length,a.pop();a.push(e)}function n(e,t){var o=l,i={rid:"video",timestamp:(new Date).getTime(),method:"GET",uri:encodeURI(r+e+"?limit="+c+"&offset="+o+"&filter=video")};return NETWORK_DEBUG&&console.log("Video Request: ",i),i}var r="/v1.0/channel/social/list/",a=[],s=[],l=0,c=10,d=function(){angular.forEach(a,function(e){e()})};return{videoArray:function(){return s},resetVideoOffset:function(){l=0},setVideoData:t,getVideoDataRequest:n,registerObserverCallback:o}}]),angular.module("NetworkModule").service("DateUtilityService",function(){function e(e){var t=new Date,o=new Date(e);if(secondsPast=(t.getTime()-o.getTime())/1e3,secondsPast<60)return"now";if(secondsPast<3600)return parseInt(secondsPast/60)+"m";if(secondsPast<86400)return parseInt(secondsPast/3600)+"h";if(secondsPast<2592e3){var i=secondsPast/86400;return Math.floor(i)+"d"}return secondsPast>2592e3?(day=o.getDate(),month=o.toDateString().match(/ [a-zA-Z]*/)[0].replace(" ",""),year=o.getFullYear()==t.getFullYear()?"":" "+o.getFullYear(),GEN_DEBUG&&console.log("DATE "+day+" "+month+year),day+" "+month+year):void 0}function t(e){var t="12",o=new Date(e);day=o.getDate(),month=o.getMonth()+1,i=o.getHours();var i=o.getHours(),n=o.getMinutes(),r=i,a="",s=o.toLocaleString("en",{timeZoneName:"short"}).split(" ").pop();return"12"==t&&(i>12?(a="PM",i-=12,10>i?r="0"+i:12==i&&(i="00",a="AM")):12>i?(r=10>i?"0"+i:i,a="AM"):12==i&&(a="PM")),10>n&&(n="0"+n),r=r+":"+n+" "+a+" "+s,date=month+"/"+day,result={date:date,time:r},GEN_DEBUG&&console.log("Scheduled date : "+result.date+"  Scheduled time : "+result.time),result}return{getTimeSince:e,getGameScheduledTime:t}}),angular.module("NetworkModule").factory("Bant",["DateUtilityService",function(e){function t(e,t){return e.mediaType=t.mediaType.substring(r,0),"video"==e.mediaType&&(e.mediaThumbUrl=t.thumbUrl),e.mediaUrl=t.url,void 0!=t.sizes&&(e.mediaAspectFull=t.sizes.full,e.mediaAspect16x9=t.sizes["16:9"],e.mediaAspect1x1=t.sizes["1:1"],e.mediaAspect2x1=t.sizes["2:1"]),void 0!=e.mediaAspect16x9?(e.mediaAspectRatio=1.778,e.mediaAspectFeed=e.mediaAspect16x9,e.mediaAspect16x9.w<e.mediaAspect16x9.h?e.mediaOrientation="portrait":e.mediaOrientation="landscape"):void 0!=e.mediaAspect1x1?(e.mediaAspectRatio=1,e.mediaAspectFeed=e.mediaAspect1x1,e.mediaOrientation="square"):void 0!=e.mediaAspect2x1&&(e.mediaAspectRatio=2,e.mediaAspectFeed=e.mediaAspect2x1,e.mediaAspect2x1.w<e.mediaAspect2x1.h?e.mediaOrientation="portrait":e.mediaOrientation="landscape"),void 0!=e.mediaAspectFeed&&(void 0==e.mediaAspectFeed.x?0:e.mediaAspectFeed.x,void 0==e.mediaAspectFeed.y?0:e.mediaAspectFeed.y,void 0==e.mediaAspectFeed.w?0:e.mediaAspectFeed.w,void 0==e.mediaAspectFeed.h?0:e.mediaAspectFeed.h),void 0!=e.mediaAspectFull&&(void 0==e.mediaAspectFull.x?0:e.mediaAspectFull.x,void 0==e.mediaAspectFull.y?0:e.mediaAspectFull.y,void 0==e.mediaAspectFull.w?0:e.mediaAspectFull.w,void 0==e.mediaAspectFull.h?0:e.mediaAspectFull.h),e}function o(o,i){return o.embedType=i.type,o.embedTitle=i.title,o.embedText=i.text,o.embedMedia={},("media"===i.type||"link"===i.type)&&i.media&&(o.embedMedia=t(o.embedMedia,i.media[0])),o.embedUrl=i.url,o.embedPlayable=i.playable,o.embedHtml=i.html,o.embedMetrics=i.metrics,o.embedMini=i.mini,o.embedAuthor=i.author,o.embedProvider=i.provider,o.embedCreatedAt=e.getTimeSince(i.createdAt),o.embedCreatedAtFull=i.createdAt,o}function i(i){var n={};if(n.id=i.id,n.author=i.author,n.owner=i.owner,void 0!=i.content.sections)for(n.sectionsLength=i.content.sections.length,j=0;j<n.sectionsLength;j++)n.type=i.content.sections[j].type,"html"==n.type&&(n.html=i.content.sections[j].html),"media"==n.type&&(n.media=i.content.sections[j].media,n=t(n,n.media[0])),("embed"==n.type||"tweet"==n.type)&&null!==i.content.sections[j].embed&&(n=o(n,i.content.sections[j].embed),n.embed=i.content.sections[j].embed),n.tweet=i.content.sections[j].tweet,n.ogp=i.content.sections[j].ogp,n.link=i.content.sections[j].link;if(n.signal=i.signal,void 0==n.signal){var r={like:!1};n.signal=r}else void 0==n.signal.like&&(n.signal.like=!1);return n.metrics=i.metrics,n.createdAtFull=i.createdAt,n.createdAt=e.getTimeSince(i.createdAt),n.pin=i.pin,n.commentId=i.commentId,n.topicId=i.topicId,n}function n(e,t){return e.signal.like==t?(NETWORK_DEBUG&&console.log("no need to change   data.signal.like:"+e.signal.like),e):(t?(e.signal.like=!0,void 0==e.metrics.likes?e.metrics.likes=1:e.metrics.likes=e.metrics.likes+1):(e.signal.like=!1,void 0!=e.metrics.likes&&(e.metrics.likes=e.metrics.likes-1)),NETWORK_DEBUG&&console.log("data.metrics.likes :"+e.metrics.likes),e)}var r=5;return{bant:i,updateBantLiked:n}}]),angular.module("NetworkModule").factory("UserInfoService",["ForumStorage","URIHelper",function(e,t){function o(){return void 0==a?(NETWORK_DEBUG&&console.log("UserInfoService : UserId is not defined , using static user, TODO : Remove this for release build"),a=s,s):a}function i(e){return e==a.userId?!0:!1}function n(t,o,i,n){NETWORK_DEBUG&&console.log("setUserCredentials: ",t,o,i,n),a.userId=t,a.accessToken=o,a.sessionId=i,l=!0,a.userType=n,e.setToLocalStorage("forumIsLoggedIn",l),e.setToLocalStorage("forumUserId",t),e.setToLocalStorage("forumAccessToken",o),e.setToLocalStorage("forumSessionId",i),e.setToLocalStorage("forumUserType",n)}function r(){return e.getFromLocalStorage("hasUserVisited")?!0:!1}var a={},s={userId:"193",accessToken:"dsKGKXyZgGs=",sessionId:"53d7b518"},l=!1;return{getUserCredentials:o,setUserCredentials:n,isCurrentUser:i,hasUserVisited:r,isUserLoggedIn:function(){return l?!0:e.getFromLocalStorage("forumIsLoggedIn")?(a={},a.userId=e.getFromLocalStorage("forumUserId"),a.accessToken=e.getFromLocalStorage("forumAccessToken"),a.sessionId=e.getFromLocalStorage("forumSessionId"),!0):!1},isPeelUser:function(){return t.isPeelUser(),NETWORK_DEBUG&&console.log("ForumStorage.getFromLocalStorage: "+e.getFromLocalStorage("forumUserType")),"peel"===a.userType?!0:"peel"===e.getFromLocalStorage("forumUserType")?!0:!1},isSmartStadiumUser:function(){var o=t.isSmartStadiumUser();return NETWORK_DEBUG&&console.log("ForumStorage.getFromLocalStorage: ",e.getFromLocalStorage("forumUserType")),o?(a.userType="email",!0):"email"===a.userType?!0:"email"===e.getFromLocalStorage("forumUserType")?!0:!1},isMI16User:function(){var o=t.isTechMUser();return NETWORK_DEBUG&&console.log("ForumStorage.getFromLocalStorage: ",e.getFromLocalStorage("forumUserType")),o?(a.userType="MI16",!0):"MI16"===a.userType?!0:"MI16"===e.getFromLocalStorage("forumUserType")?!0:!1},isMWCUser:function(){var o=t.isMWCUser();return NETWORK_DEBUG&&console.log("ForumStorage.getFromLocalStorage: ",e.getFromLocalStorage("forumUserType")),o?(a.userType="MWC",!0):"MWC"===a.userType?!0:"MWC"===e.getFromLocalStorage("forumUserType")?!0:!1},getUserType:function(){return NETWORK_DEBUG&&console.log("UIS _userType - - - ",a.userType),a.userType},isGuestUser:function(){return NETWORK_DEBUG&&console.log("UIS _userType - - - ",a.userType),"guest"===a.userType||"guest"===e.getFromLocalStorage("forumUserType")?!0:!1}}}]),angular.module("AuthModule").factory("AuthService",["$http","$window","$location","UserInfoService","TopicService","ReplyService","networkService","ForumDeviceInfo","ChannelService","URIHelper",function(e,t,o,i,n,r,a,s,l,c){var d=!1,u=function(){NETWORK_DEBUG&&console.log("Logging in as Guest");var e={};e.id=s.getDeviceId(),e.userName="GuestUser";var t=h("guest",-28800,e);v(t)},m=function(e){FB.login(function(t){if("connected"===t.status){e();var o=h("facebook",-25200,t.authResponse);v(o)}})},p=function(){var e={};e.id=c.getPeelUserId(),e.userName=c.getPeelUserName();var t=h("peel",-28800,e);v(t)},g=function(){var e={id:c.getSSUserId(),userName:c.getSSUserName()},t=h("email",-28800,e);v(t)},f=function(e,t,o){var i={id:t,userName:e};NETWORK_DEBUG&&console.log("techMLogin: ",i);var n=h("email",-28800,i);v(n,o)},h=function(e,t,o){var i=s.getDeviceId(),n={type:e,locale:"en_US",utcOffset:t,deviceType:"web",deviceId:i,deviceModel:"browser",appKey:"testKey",appVersion:"1.0"};return"facebook"===e?n.facebook={id:o.userID,accessToken:o.accessToken}:"peel"===e?n.peel={id:o.id,name:o.userName}:"email"===e&&(n.email={id:o.id,name:o.userName}),n},v=function(t,o){var n=t.type;o&&(n=o),e.post(REGISTER_SERVER_URI,JSON.stringify(t)).then(function(e){200===e.status&&(NETWORK_DEBUG&&console.log("Successfully Registered User of Type: "+n),"facebook"===t.type&&(d=!0),i.setUserCredentials(e.data.userId,e.data.accessToken,e.data.sessionId,n))},function(e){NETWORK_DEBUG&&console.log("Registration Error: ",e)}).then(function(e){T()})},T=function(){NETWORK_DEBUG&&console.log("Initializing Content"),a.init();var e=l.getChannel(),i=n.getTopicId();if(e)NETWORK_DEBUG&&console.log("found channel ID: "+e),a.send(l.getLiveGameTopic(e));else if(i)NETWORK_DEBUG&&console.log("found Topic ID: "+i),HTML5_LOC?o.path("/topic/"+i):t.location="#/topic/"+i;else{var s=r.getPostId();s&&(NETWORK_DEBUG&&console.log("found post ID: "+s),HTML5_LOC?o.path("/post/"+s):t.location="#/post/"+s)}};return{loginAsGuest:u,loginToFacebook:m,loginWithPeel:p,loginWithEmail:g,techMLogin:f,setRegistrationParams:h,registerUser:v,initializeContent:T,userLoggedInToFacebook:d}}]),angular.module("NetworkModule").service("StaticData",function(){function e(){for(var e=[],t=["fakePhoto1.jpg","fakePhoto2.jpg","fakePhoto3.jpg","fakePhoto4.jpg","fakePhoto5.jpg","fakePhoto6.jpg"],n=0,r=["fakeVideo1.jpg","fakeVideo2.jpg","fakeVideo3.jpg"],a=0,s=[{type:"photo",postContent:"Will this be the year Kaep teaches Sherman a lesson or will Kaep get schooled again?",postMedia:"fakePhoto1.jpg"},{type:"video",postContent:"Remember Kyle Williams - for some reason, I am having recurring nightmares about him again - weird but true:(",postMedia:"fakeVideo1.jpg"},{type:"photo",postContent:"Will Kaep be given a free reign to do whatever he wants? Please don't make him a pocket passer because HE IS NOT ONE",postMedia:"fakePhoto2.jpg"},{type:"video",postContent:"Running back of the 9ers this season truly scares the hell out of me - thoughts?",postMedia:"fakeVideo2.jpg"},{type:"video",postContent:"Will our defense save us again? We have seen that this offense needs lot of help:(",postMedia:"fakeVideo3.jpg"},{type:"photo",postContent:"Can't wait for this game - gets me want to kick Seahawks every time we play them",postMedia:"fakePhoto3.jpg"},{type:"text",postContent:"Jimmy Graham is going to be such a formidable match-up for our secondary. Not sure if we have the personnel to cover him. Hate the fact that the saehawks offense just got whole lot better this year",postMedia:""},{type:"text",postContent:"From contenders to last in the league - reasons for our free fall down the ranks",postMedia:""},{type:"text",postContent:"One more drubbing - when are we going to be good again?",postMedia:""},{type:"text",postContent:"How do we always fuck up the second half? It is always the take of two halves with us this year. Sucks",postMedia:""},{type:"text",postContent:"Are you fuckin kidding me - how did we miss that tackle? Why do we keep messing up defensively during 3rd and long? That is the 5th 3rd and long conversion for the Hawks.. Come on DDDDD",postMedia:""},{type:"text",postContent:"Time to talk about the next season already? Sure nothing is going to change and we are going to suck again.. ",postMedia:""},{type:"text",postContent:"We miss Aldon Smith so much - we absolutely don't have an edge rusher.. what a jack-ass.. blew away so much second chances:(",postMedia:""}],l=0;l<s.length;l++){var c=s[l],d=new Object;d.postID=l;var u=20,m=u+Math.round(Math.random()*(i.length-u));i.substring(0,m);d.postContent=c.postContent;var p=c.type;if(d.postType=p,"photo"==p){var g=t[n%t.length];d.photo=g,n++}else if("video"==p){var f=r[a%r.length];d.video=f,a++}var h=o[l%o.length];d.postAuthorPhoto=h.photo,c.postAuthorPhoto=h.photo,d.postAuthorName=h.name,c.postAuthorName=h.name,d.likeCount=Math.floor(100*Math.random()),c.likeCount=Math.floor(100*Math.random()),d.commentCount=Math.floor(500*Math.random()),c.commentCount=Math.floor(500*Math.random()),e.push(c)}return e}function t(){for(var e=[],t=0;10>t;t++){var n=new Object;n.postID=t;var r=20,a=r+Math.round(Math.random()*(i.length-r)),s=i.substring(0,a);n.replyContent=s,n.replyType="text";var l=o[t%o.length];n.postAuthorPhoto=l.photo,n.postAuthorName=l.name,n.likeCount=Math.floor(100*Math.random()),n.commentCount=Math.floor(500*Math.random()),e.push(n)}return e}var o=[{photo:"ana.png",name:"Ana"},{photo:"arod.png",name:"A-Rod"},{photo:"cristiano.png",name:"Cristiano"},{photo:"derek.png",name:"Derek"},{photo:"dwayne.png",name:"Dwayne"},{photo:"erin.png",name:"Erin"},{photo:"jordan.png",name:"Michael"},{photo:"lebron.png",name:"Lebron"},{photo:"lionel.png",name:"Lionel"},{photo:"maria.png",name:"Maria"}],i="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris";return{getPostsForTopicID:e,getRepliesForPostID:t}}),angular.module("NetworkModule").factory("FDSUtility",function(){function e(e,t){for(NETWORK_DEBUG&&console.log("structureLengths :"+e.length),i=0;i<e.length;i++)if(e[i].id==t)return e[i]}function t(e,t){for(NETWORK_DEBUG&&console.log("structureLengths :"+e.length),i=0;i<e.length;i++)if(e[i].id==t)return i;return-1}function o(t,o){var i=e(t,o);return void 0!=i&&(NETWORK_DEBUG&&console.log("found element :"+i+" tempStructure.signal.like :"+i.signal.like),1==i.signal.like)?!0:!1}function n(t,o){var i=e(t,o);return void 0!=i&&(NETWORK_DEBUG&&console.log("found element :"+i+" tempStructure.signal.flag :"+i.signal.flag),1==i.signal.flag)?!0:!1}function r(t,o,i){var n=e(t,o);void 0!=n&&(NETWORK_DEBUG&&console.log("found element :"+n+" tempStructure.signal.flag :"+n.signal.flag),n.signal.flag=i)}function a(e,o){var i=t(e,o);return-1!=i&&(NETWORK_DEBUG&&console.log("found element at:"+i),e.splice(i,1)),e}return{isLikedById:o,isFlaggedById:n,flagById:r,deleteById:a}}),angular.module("MediaModule",["angularFileUpload","NetworkModule","TopicModule"]).factory("MUService",function(){function e(){var e={rid:"comment",timestamp:(new Date).getTime(),method:"POST",uri:encodeURI(i)};return e.data={lang:"en",topicId:s},r||(e={rid:"reply",timestamp:(new Date).getTime(),method:"POST",uri:encodeURI(n)},e.data={lang:"en",topicId:s},e.data.target={type:"comment",id:l},e.data.commentId=l),e}function t(e,t,o,i,n){void 0===t&&(t=""),NETWORK_DEBUG&&console.log("Setting Comment Params: ",e,t,o,i,n),s=e,a=t,r=o,l=i,c=n}function o(t){var o={media:[t]},i=[];void 0!==a&&i.push({type:"html",html:a}),i.push({type:"media",media:o.media});var n=e(),r={sections:i};return n.data.content=r,NETWORK_DEBUG&&console.log("Media comment Request :"+JSON.stringify(n,null,10)),n}var i="/v1.0/comment/create",n="/v1.0/reply/create",r=!0,a="",s="",l="",c="";return{postMediaRequest:o,setCommentParams:t,resetCommentParams:function(){s="",l="",a=""}}});
//# sourceMappingURL=app.min.js.map
