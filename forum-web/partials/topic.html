<div id="newCommentsAvailableIndicatorDiv" ng-show="showNewCommentsIndicator">
	<center>
		<button id="newCommentsAvailableIndicatorButton" class="btn-link" ng-click="newCommentsIndicatorTapped()"><img src="img/newCommentIndicator.png"/></button>
	</center>
</div>

<section id="topicSection">
	<nav class="navbar navbar-fixed-top" id="header">
		<div id="peelNavBar" ng-if="isPeelUser == true">
			<button class="btn-link peelButton" id="closePeelButton" ng-click="peelClose()"><img src="img/peelBackButton-2x.png"/></button>
			<button class="btn-link peelButton" id="peelWatchOnTVButton" ng-click="peelWatchOnTV()"><img src="img/peel_watchOnTVButton.png"/></button>
		</div>
       	<canvas id="scoreCardCanvas" width="1" height="1">
   		</canvas>
   		<div id="scoreCardContent">

   			<div id="scoreCardTitlesRow" class="row">
				<span id="leftTeamSpan">
					{{leftTeam.name}}
				</span>
				<span ng-if="gameStatus == 'live'" id="liveGameIndicatorSpan">
					<img src="img/live-2x.png"/>
				</span>
				<span id="rightTeamSpan">
					{{rightTeam.name}}
				</span>
			</div>

			<div id="scoreCardDataRow" class="row">
				<span id="leftTeamLogo">
					<span class="helper"></span>
					<img src={{leftTeam.logo}} class="teamLogo"/>
				</span>
				<span id="leftTeamScore">
					{{leftTeamScore}}
				</span>
				<span id="gameTime">
					<div ng-if="gameStatus == 'live' || gameStatus == 'future'">
						<div id="gameTimeTopLine" ng-if="gameStatus == 'live'">
							{{gameClock}}
						</div>
						<div id="gameTimeTopLine" ng-if="gameStatus == 'future'">
							{{gameScheduledTime.date}}
						</div>
						<div id="gameTimeBottomLine" ng-if="gameStatus == 'live'">
							{{gamePeriod}}
						</div>
						<div id="gameTimeBottomLine" ng-if="gameStatus == 'future'">
							{{gameScheduledTime.time}}
						</div>
					</div>
					<div ng-if="gameStatus == 'past'">
						<div id="gameTimeCenterLine">
							<span><b>FINAL</b></span>
						</div>
					</div>
				</span>
				<span id="rightTeamScore">
					{{rightTeamScore}}
				</span>
				<span id="rightTeamLogo">
					<span class="helper"></span>
					<img src={{rightTeam.logo}} class="teamLogo"/>
				</span>
			</div>

			<div id="allScoresButtonRow">
				<a href="{{allScoresURL}}">
				<span id="allScoresButtonSpan">&nbsp;&nbsp;{{allScoresTitle}}&nbsp;&nbsp;</span>
				</a>
			</div>

   		</div>
    </nav>

	<div id="topicDetails" class="row"> 
		<div>
			<b>{{topicTitle}}</b>
		</div>
		<div id="topicDescriptionBody">
			{{topicDescHtml}}
		</div>
		<div class="topicSharingButtonsRow">
			<button class="btn-link topic-social-btn" ng-click="updateLikeTopic()" ng-switch="liked">
							<img ng-switch-when="true" src="img/likeBigSelected.png"/> 
							<img ng-switch-when="false" src="img/likeBig.png"/> 
							
							</button>
							<span class="socialButtonLable">{{likesCount}} </span>
			<button class="btn-link topic-social-btn" ng-click="commentOnTopic()"><img src="img/commentBig.png"/> 
			</button>
			<span class="socialButtonLable">{{commentsCount}}</span>
		</div>
	</div>

	<div class="commentsHeader">
		Comments
	</div>

	<div class="commentsContainer">
		<div ng-repeat="thisPost in commentsArray track by $index" ng-switch="thisPost.mediaType" class="row postRow" id="{{$index}}">

				<span class="postAuthorPhoto">
					<div>
						<a class="thumbnail">
		  					<img ng-src="{{thisPost.postAuthorPhoto}}" alt="" onerror="this.src='img/default_user_v3.png'" class="userPhoto">
					    </a>
				    </div>
				    <div id="pinIcon" ng-if="thisPost.pin == true">
					    <img src="img/pin.png"/>
					    
				    </div>
				</span>

				<span class="post">

					<div class="roww">
						<span class="postUsername">
							{{thisPost.postAuthorName}}
						</span>
						<span class="timestamp">
							{{thisPost.postTimestamp}}
						</span>
					</div>

					<div class="postContent">
						{{thisPost.html}} 
					</div>

					<div ng-switch-when="image">
							<img ng-src="{{thisPost.mediaUrl}}" class="postPhoto" ng-click="imageClick(thisPost.mediaUrl);" />
					</div>

					<div ng-switch-when="video">
						<video controls="controls" poster="{{thisPost.mediaThumbUrl}}" class="postVideo">
						  <source ng-src="{{trustSrc(thisPost.mediaUrl)}}" type="video/mp4">
						</video>
					</div>	

					<div class="socialButtonsRow">
						<button class="btn-link social-btn" ng-click="updateLikeComment(thisPost.id)" ng-switch="thisPost.isLiked">
							<img ng-switch-when="true" src="img/likeSmallSelected.png"/> 
							<img ng-switch-when="false" src="img/likeSmall.png"/> 
						
						</button>
						<span class="socialButtonLable">{{thisPost.likeCount}}	</span>
						
						<button class="btn-link social-btn" ng-click="goToRepliesWithKeyboardTriggered(thisPost.id)">
						<img src="img/replySmall.png"/> </button>
						<span class="socialButtonLable"> {{thisPost.replyCount}}</span>
					</div>
					<div class="sharingButtonsRow">
						<div class="btn-group">
  							<button class="btn-link social-btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" ng-click="moreButtonTapped();">
    							<img src="img/moreButton.png"/>
  							</button>
						  <ul class="dropdown-menu dropdown-menu-right" ng-switch="thisPost.isMyComment">

						    <li ng-switch-when="true"><a ng-click="deleteComment(thisPost.id);">Delete Comment</a></li>
						    <li ng-switch-when="false"><a ng-click="reportCommentAsSpam(thisPost.id);">Report as spam</a></li>
						  </ul>
						</div>
						</div>
					
				</span>
		</div>
	</div>
	
	<footer class="footer" id="textEntryField">
        <form ng-submit="postComment(commentText)">
    		<div class="input-group">
      			<input id="topicCommentField" type="text" class="form-control" placeholder="Write a comment..." ng-model="commentText">
      			<span class="input-group-btn">
        			<button id="postCommentButton" class="btn btn-default" type="button" ng-click="postComment(commentText)">Post</button>
      			</span>
    		</div>
    	</form>
	</footer>

</section>


